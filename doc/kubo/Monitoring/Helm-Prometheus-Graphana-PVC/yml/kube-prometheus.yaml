---
# Source: kube-prometheus/charts/alertmanager/templates/secret.yaml

apiVersion: v1
kind: Secret
metadata:
  labels:
    alertmanager: mon
    app: alertmanager
    chart: alertmanager-0.1.7
    heritage: Tiller
    release: mon
  name: alertmanager-mon
  namespace: monitoring
data:
  alertmanager.yaml: "Z2xvYmFsOgogIHJlc29sdmVfdGltZW91dDogNW0KcmVjZWl2ZXJzOgotIG5hbWU6ICJudWxsIgpyb3V0ZToKICBncm91cF9ieToKICAtIGpvYgogIGdyb3VwX2ludGVydmFsOiA1bQogIGdyb3VwX3dhaXQ6IDMwcwogIHJlY2VpdmVyOiAibnVsbCIKICByZXBlYXRfaW50ZXJ2YWw6IDEyaAogIHJvdXRlczoKICAtIG1hdGNoOgogICAgICBhbGVydG5hbWU6IERlYWRNYW5zU3dpdGNoCiAgICByZWNlaXZlcjogIm51bGwiCg=="

---
# Source: kube-prometheus/charts/grafana/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  labels:
    app: mon-grafana
    chart: "grafana-0.0.37"
    heritage: "Tiller"
    release: "mon"
  name: mon-grafana
  namespace: monitoring
type: Opaque
data:
  password: "U1lDc01QZTE1RzM3WndkTWVkdHhON2dVUUYzQ3JxRVEzVmtXR3dOTw=="
  user: "YWRtaW4="

---
# Source: kube-prometheus/charts/grafana/templates/dashboards-configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: mon-grafana
    chart: "grafana-0.0.37"
    heritage: "Tiller"
    release: "mon"
  name: mon-grafana
  namespace: monitoring
data:
  deployment-dashboard.json: |-
    {
        "dashboard": {
            "__inputs": [
                {
                    "description": "",
                    "label": "prometheus",
                    "name": "DS_PROMETHEUS",
                    "pluginId": "prometheus",
                    "pluginName": "Prometheus",
                    "type": "datasource"
                }
            ],
            "annotations": {
                "list": []
            },
            "editable": true,
            "graphTooltip": 1,
            "hideControls": false,
            "links": [],
            "rows": [
                {
                    "collapse": false,
                    "height": "200px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 8,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "cores",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 4,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": true
                            },
                            "targets": [
                                {
                                    "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"$deployment_namespace\",pod_name=~\"$deployment_name.*\"}[3m]))",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "CPU",
                            "type": "singlestat",
                            "valueFontSize": "110%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 9,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "GB",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "80%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 4,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": true
                            },
                            "targets": [
                                {
                                    "expr": "sum(container_memory_usage_bytes{namespace=\"$deployment_namespace\",pod_name=~\"$deployment_name.*\"}) / 1024^3",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Memory",
                            "type": "singlestat",
                            "valueFontSize": "110%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "Bps",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": false
                            },
                            "id": 7,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 4,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": true
                            },
                            "targets": [
                                {
                                    "expr": "sum(rate(container_network_transmit_bytes_total{namespace=\"$deployment_namespace\",pod_name=~\"$deployment_name.*\"}[3m])) + sum(rate(container_network_receive_bytes_total{namespace=\"$deployment_namespace\",pod_name=~\"$deployment_name.*\"}[3m]))",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Network",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": false,
                    "title": "Dashboard Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "height": "100px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": false
                            },
                            "id": 5,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "max(kube_deployment_spec_replicas{deployment=\"$deployment_name\",namespace=\"$deployment_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "metric": "kube_deployment_spec_replicas",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Desired Replicas",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 6,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "min(kube_deployment_status_replicas_available{deployment=\"$deployment_name\",namespace=\"$deployment_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Available Replicas",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 3,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "max(kube_deployment_status_observed_generation{deployment=\"$deployment_name\",namespace=\"$deployment_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Observed Generation",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 2,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "max(kube_deployment_metadata_generation{deployment=\"$deployment_name\",namespace=\"$deployment_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Metadata Generation",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": false,
                    "title": "Dashboard Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "height": "350px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 1,
                            "isNew": true,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 12,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "max(kube_deployment_status_replicas{deployment=\"$deployment_name\",namespace=\"$deployment_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "legendFormat": "current replicas",
                                    "refId": "A",
                                    "step": 30
                                },
                                {
                                    "expr": "min(kube_deployment_status_replicas_available{deployment=\"$deployment_name\",namespace=\"$deployment_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "legendFormat": "available",
                                    "refId": "B",
                                    "step": 30
                                },
                                {
                                    "expr": "max(kube_deployment_status_replicas_unavailable{deployment=\"$deployment_name\",namespace=\"$deployment_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "legendFormat": "unavailable",
                                    "refId": "C",
                                    "step": 30
                                },
                                {
                                    "expr": "min(kube_deployment_status_replicas_updated{deployment=\"$deployment_name\",namespace=\"$deployment_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "legendFormat": "updated",
                                    "refId": "D",
                                    "step": 30
                                },
                                {
                                    "expr": "max(kube_deployment_spec_replicas{deployment=\"$deployment_name\",namespace=\"$deployment_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "legendFormat": "desired",
                                    "refId": "E",
                                    "step": 30
                                }
                            ],
                            "title": "Replicas",
                            "tooltip": {
                                "msResolution": true,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "none",
                                    "label": "",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "label": "",
                                    "logBase": 1,
                                    "show": false
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "Dashboard Row",
                    "titleSize": "h6"
                }
            ],
            "schemaVersion": 14,
            "sharedCrosshair": false,
            "style": "dark",
            "tags": [],
            "templating": {
                "list": [
                    {
                        "allValue": ".*",
                        "current": {},
                        "datasource": "${DS_PROMETHEUS}",
                        "hide": 0,
                        "includeAll": false,
                        "label": "Namespace",
                        "multi": false,
                        "name": "deployment_namespace",
                        "options": [],
                        "query": "label_values(kube_deployment_metadata_generation, namespace)",
                        "refresh": 1,
                        "regex": "",
                        "sort": 0,
                        "tagValuesQuery": null,
                        "tags": [],
                        "tagsQuery": "",
                        "type": "query",
                        "useTags": false
                    },
                    {
                        "allValue": null,
                        "current": {},
                        "datasource": "${DS_PROMETHEUS}",
                        "hide": 0,
                        "includeAll": false,
                        "label": "Deployment",
                        "multi": false,
                        "name": "deployment_name",
                        "options": [],
                        "query": "label_values(kube_deployment_metadata_generation{namespace=\"$deployment_namespace\"}, deployment)",
                        "refresh": 1,
                        "regex": "",
                        "sort": 0,
                        "tagValuesQuery": "",
                        "tags": [],
                        "tagsQuery": "deployment",
                        "type": "query",
                        "useTags": false
                    }
                ]
            },
            "time": {
                "from": "now-6h",
                "to": "now"
            },
            "timepicker": {
                "refresh_intervals": [
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options": [
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone": "browser",
            "title": "Deployment",
            "version": 1
        },
        "inputs": [
            {
                "name": "DS_PROMETHEUS",
                "pluginId": "prometheus",
                "type": "datasource",
                "value": "prometheus"
            }
        ],
        "overwrite": true
    }
  kubernetes-capacity-planning-dashboard.json: |-
    {
        "dashboard": {
            "__inputs": [
                {
                    "description": "",
                    "label": "prometheus",
                    "name": "DS_PROMETHEUS",
                    "pluginId": "prometheus",
                    "pluginName": "Prometheus",
                    "type": "datasource"
                }
            ],
            "annotations": {
                "list": []
            },
            "editable": true,
            "gnetId": 22,
            "graphTooltip": 0,
            "hideControls": false,
            "links": [],
            "refresh": false,
            "rows": [
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 3,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum(rate(node_cpu{mode=\"idle\"}[2m])) * 100",
                                    "hide": false,
                                    "intervalFactor": 10,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 50
                                }
                            ],
                            "title": "Idle CPU",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "percent",
                                    "label": "cpu usage",
                                    "logBase": 1,
                                    "min": 0,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 9,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum(node_load1)",
                                    "intervalFactor": 4,
                                    "legendFormat": "load 1m",
                                    "refId": "A",
                                    "step": 20,
                                    "target": ""
                                },
                                {
                                    "expr": "sum(node_load5)",
                                    "intervalFactor": 4,
                                    "legendFormat": "load 5m",
                                    "refId": "B",
                                    "step": 20,
                                    "target": ""
                                },
                                {
                                    "expr": "sum(node_load15)",
                                    "intervalFactor": 4,
                                    "legendFormat": "load 15m",
                                    "refId": "C",
                                    "step": 20,
                                    "target": ""
                                }
                            ],
                            "title": "System Load",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "percentunit",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 4,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [
                                {
                                    "alias": "node_memory_SwapFree{instance=\"172.17.0.1:9100\",job=\"prometheus\"}",
                                    "yaxis": 2
                                }
                            ],
                            "spaceLength": 10,
                            "span": 9,
                            "stack": true,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum(node_memory_MemTotal) - sum(node_memory_MemFree) - sum(node_memory_Buffers) - sum(node_memory_Cached)",
                                    "intervalFactor": 2,
                                    "legendFormat": "memory usage",
                                    "metric": "memo",
                                    "refId": "A",
                                    "step": 10,
                                    "target": ""
                                },
                                {
                                    "expr": "sum(node_memory_Buffers)",
                                    "interval": "",
                                    "intervalFactor": 2,
                                    "legendFormat": "memory buffers",
                                    "metric": "memo",
                                    "refId": "B",
                                    "step": 10,
                                    "target": ""
                                },
                                {
                                    "expr": "sum(node_memory_Cached)",
                                    "interval": "",
                                    "intervalFactor": 2,
                                    "legendFormat": "memory cached",
                                    "metric": "memo",
                                    "refId": "C",
                                    "step": 10,
                                    "target": ""
                                },
                                {
                                    "expr": "sum(node_memory_MemFree)",
                                    "interval": "",
                                    "intervalFactor": 2,
                                    "legendFormat": "memory free",
                                    "metric": "memo",
                                    "refId": "D",
                                    "step": 10,
                                    "target": ""
                                }
                            ],
                            "title": "Memory Usage",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "individual"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "min": "0",
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 5,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "((sum(node_memory_MemTotal) - sum(node_memory_MemFree) - sum(node_memory_Buffers) - sum(node_memory_Cached)) / sum(node_memory_MemTotal)) * 100",
                                    "intervalFactor": 2,
                                    "metric": "",
                                    "refId": "A",
                                    "step": 60,
                                    "target": ""
                                }
                            ],
                            "thresholds": "80, 90",
                            "title": "Memory Usage",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "246px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 6,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [
                                {
                                    "alias": "read",
                                    "yaxis": 1
                                },
                                {
                                    "alias": "{instance=\"172.17.0.1:9100\"}",
                                    "yaxis": 2
                                },
                                {
                                    "alias": "io time",
                                    "yaxis": 2
                                }
                            ],
                            "spaceLength": 10,
                            "span": 9,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum(rate(node_disk_bytes_read[5m]))",
                                    "hide": false,
                                    "intervalFactor": 4,
                                    "legendFormat": "read",
                                    "refId": "A",
                                    "step": 20,
                                    "target": ""
                                },
                                {
                                    "expr": "sum(rate(node_disk_bytes_written[5m]))",
                                    "intervalFactor": 4,
                                    "legendFormat": "written",
                                    "refId": "B",
                                    "step": 20
                                },
                                {
                                    "expr": "sum(rate(node_disk_io_time_ms[5m]))",
                                    "intervalFactor": 4,
                                    "legendFormat": "io time",
                                    "refId": "C",
                                    "step": 20
                                }
                            ],
                            "title": "Disk I/O",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "ms",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percentunit",
                            "gauge": {
                                "maxValue": 1,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 12,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "(sum(node_filesystem_size{device!=\"rootfs\"}) - sum(node_filesystem_free{device!=\"rootfs\"})) / sum(node_filesystem_size{device!=\"rootfs\"})",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 60,
                                    "target": ""
                                }
                            ],
                            "thresholds": "0.75, 0.9",
                            "title": "Disk Space Usage",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 8,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [
                                {
                                    "alias": "transmitted",
                                    "yaxis": 2
                                }
                            ],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum(rate(node_network_receive_bytes{device!~\"lo\"}[5m]))",
                                    "hide": false,
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 10,
                                    "target": ""
                                }
                            ],
                            "title": "Network Received",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 10,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [
                                {
                                    "alias": "transmitted",
                                    "yaxis": 2
                                }
                            ],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum(rate(node_network_transmit_bytes{device!~\"lo\"}[5m]))",
                                    "hide": false,
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "B",
                                    "step": 10,
                                    "target": ""
                                }
                            ],
                            "title": "Network Transmitted",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "276px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 11,
                            "isNew": true,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 11,
                            "span": 9,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum(kube_pod_info)",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "Current number of Pods",
                                    "refId": "A",
                                    "step": 10
                                },
                                {
                                    "expr": "sum(kube_node_status_capacity_pods)",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "Maximum capacity of pods",
                                    "refId": "B",
                                    "step": 10
                                }
                            ],
                            "title": "Cluster Pod Utilization",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "individual"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 7,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "100 - (sum(kube_node_status_capacity_pods) - sum(kube_pod_info)) / sum(kube_node_status_capacity_pods) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 60,
                                    "target": ""
                                }
                            ],
                            "thresholds": "80, 90",
                            "title": "Pod Utilization",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                }
            ],
            "schemaVersion": 14,
            "sharedCrosshair": false,
            "style": "dark",
            "tags": [],
            "templating": {
                "list": []
            },
            "time": {
                "from": "now-1h",
                "to": "now"
            },
            "timepicker": {
                "refresh_intervals": [
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options": [
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone": "browser",
            "title": "Kubernetes Capacity Planning",
            "version": 4
        },
        "inputs": [
            {
                "name": "DS_PROMETHEUS",
                "pluginId": "prometheus",
                "type": "datasource",
                "value": "prometheus"
            }
        ],
        "overwrite": true
    }
  kubernetes-cluster-health-dashboard.json: |-
    {
        "dashboard": {
            "__inputs": [
                {
                    "description": "",
                    "label": "prometheus",
                    "name": "DS_PROMETHEUS",
                    "pluginId": "prometheus",
                    "pluginName": "Prometheus",
                    "type": "datasource"
                }
            ],
            "annotations": {
                "list": []
            },
            "editable": true,
            "graphTooltip": 0,
            "hideControls": false,
            "links": [],
            "refresh": "10s",
            "rows": [
                {
                    "collapse": false,
                    "editable": true,
                    "height": "254px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 1,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(up{job=~\"apiserver|kube-scheduler|kube-controller-manager\"} == 0)",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "1, 3",
                            "title": "Control Plane Components Down",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "Everything UP and healthy",
                                    "value": "null"
                                },
                                {
                                    "op": "=",
                                    "text": "",
                                    "value": ""
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 2,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(ALERTS{alertstate=\"firing\",alertname!=\"DeadMansSwitch\"})",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "1, 3",
                            "title": "Alerts Firing",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "0",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 3,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(ALERTS{alertstate=\"pending\",alertname!=\"DeadMansSwitch\"})",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "3, 5",
                            "title": "Alerts Pending",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "0",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 4,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "count(increase(kube_pod_container_status_restarts_total[1h]) > 5)",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "1, 3",
                            "title": "Crashlooping Pods",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "0",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        }
                    ],
                    "showTitle": false,
                    "title": "Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 5,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(kube_node_status_condition{condition=\"Ready\",status!=\"true\"})",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "1, 3",
                            "title": "Node Not Ready",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 6,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(kube_node_status_condition{condition=\"DiskPressure\",status=\"true\"})",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "1, 3",
                            "title": "Node Disk Pressure",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 7,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(kube_node_status_condition{condition=\"MemoryPressure\",status=\"true\"})",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "1, 3",
                            "title": "Node Memory Pressure",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 8,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(kube_node_spec_unschedulable)",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "1, 3",
                            "title": "Nodes Unschedulable",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        }
                    ],
                    "showTitle": false,
                    "title": "Row",
                    "titleSize": "h6"
                }
            ],
            "schemaVersion": 14,
            "sharedCrosshair": false,
            "style": "dark",
            "tags": [],
            "templating": {
                "list": []
            },
            "time": {
                "from": "now-6h",
                "to": "now"
            },
            "timepicker": {
                "refresh_intervals": [
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options": [
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone": "browser",
            "title": "Kubernetes Cluster Health",
            "version": 9
        },
        "inputs": [
            {
                "name": "DS_PROMETHEUS",
                "pluginId": "prometheus",
                "type": "datasource",
                "value": "prometheus"
            }
        ],
        "overwrite": true
    }
  kubernetes-cluster-status-dashboard.json: |
    {
        "dashboard": {
            "__inputs": [
                {
                    "description": "",
                    "label": "prometheus",
                    "name": "DS_PROMETHEUS",
                    "pluginId": "prometheus",
                    "pluginName": "Prometheus",
                    "type": "datasource"
                }
            ],
            "annotations": {
                "list": []
            },
            "editable": true,
            "graphTooltip": 0,
            "hideControls": false,
            "links": [],
            "rows": [
                {
                    "collapse": false,
                    "height": "129px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 5,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 6,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(up{job=~\"apiserver|kube-scheduler|kube-controller-manager\"} == 0)",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "1, 3",
                            "title": "Control Plane UP",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "UP",
                                    "value": "null"
                                }
                            ],
                            "valueName": "total"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 6,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 6,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(ALERTS{alertstate=\"firing\",alertname!=\"DeadMansSwitch\"})",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "3, 5",
                            "title": "Alerts Firing",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "0",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        }
                    ],
                    "showTitle": true,
                    "title": "Cluster Health",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "height": "168px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 1,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "(sum(up{job=\"apiserver\"} == 1) / count(up{job=\"apiserver\"})) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "50, 80",
                            "title": "API Servers UP",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 2,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "(sum(up{job=\"kube-controller-manager\"} == 1) / count(up{job=\"kube-controller-manager\"})) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "50, 80",
                            "title": "Controller Managers UP",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 3,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "(sum(up{job=\"kube-scheduler\"} == 1) / count(up{job=\"kube-scheduler\"})) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "50, 80",
                            "title": "Schedulers UP",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": true,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 4,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "count(increase(kube_pod_container_status_restarts_total{namespace=~\"kube-system|tectonic-system\"}[1h]) > 5)",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "1, 3",
                            "title": "Crashlooping Control Plane Pods",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "0",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        }
                    ],
                    "showTitle": true,
                    "title": "Control Plane Status",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "height": "158px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 8,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "sum(100 - (avg by (instance) (rate(node_cpu{job=\"node-exporter\",mode=\"idle\"}[5m])) * 100)) / count(node_cpu{job=\"node-exporter\",mode=\"idle\"})",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "80, 90",
                            "title": "CPU Utilization",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 7,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "((sum(node_memory_MemTotal) - sum(node_memory_MemFree) - sum(node_memory_Buffers) - sum(node_memory_Cached)) / sum(node_memory_MemTotal)) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "80, 90",
                            "title": "Memory Utilization",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 9,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "(sum(node_filesystem_size{device!=\"rootfs\"}) - sum(node_filesystem_free{device!=\"rootfs\"})) / sum(node_filesystem_size{device!=\"rootfs\"})",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "80, 90",
                            "title": "Filesystem Utilization",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 10,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "100 - (sum(kube_node_status_capacity_pods) - sum(kube_pod_info)) / sum(kube_node_status_capacity_pods) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "80, 90",
                            "title": "Pod Utilization",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": true,
                    "title": "Capacity Planning",
                    "titleSize": "h6"
                }
            ],
            "schemaVersion": 14,
            "sharedCrosshair": false,
            "style": "dark",
            "tags": [],
            "templating": {
                "list": []
            },
            "time": {
                "from": "now-6h",
                "to": "now"
            },
            "timepicker": {
                "refresh_intervals": [
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options": [
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone": "browser",
            "title": "Kubernetes Cluster Status",
            "version": 3
        },
        "inputs": [
            {
                "name": "DS_PROMETHEUS",
                "pluginId": "prometheus",
                "type": "datasource",
                "value": "prometheus"
            }
        ],
        "overwrite": true
    }
  kubernetes-control-plane-status-dashboard.json: |-
    {
        "dashboard": {
            "__inputs": [
                {
                    "description": "",
                    "label": "prometheus",
                    "name": "DS_PROMETHEUS",
                    "pluginId": "prometheus",
                    "pluginName": "Prometheus",
                    "type": "datasource"
                }
            ],
            "annotations": {
                "list": []
            },
            "editable": true,
            "graphTooltip": 0,
            "hideControls": false,
            "links": [],
            "rows": [
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 1,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "(sum(up{job=\"apiserver\"} == 1) / sum(up{job=\"apiserver\"})) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "50, 80",
                            "title": "API Servers UP",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 2,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "(sum(up{job=\"kube-controller-manager\"} == 1) / sum(up{job=\"kube-controller-manager\"})) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "50, 80",
                            "title": "Controller Managers UP",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 3,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "(sum(up{job=\"kube-scheduler\"} == 1) / sum(up{job=\"kube-scheduler\"})) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "50, 80",
                            "title": "Schedulers UP",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 4,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "max(sum by(instance) (rate(apiserver_request_count{code=~\"5..\"}[5m])) / sum by(instance) (rate(apiserver_request_count[5m]))) * 100",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "thresholds": "5, 10",
                            "title": "API Server Request Error Rate",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "0",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": false,
                    "title": "Dashboard Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 7,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 1,
                            "links": [],
                            "nullPointMode": "null",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 12,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum by(verb) (rate(apiserver_latency_seconds:quantile[5m]) >= 0)",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 30
                                }
                            ],
                            "title": "API Server Request Latency",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "individual"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "Dashboard Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 5,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 1,
                            "links": [],
                            "nullPointMode": "null",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "cluster:scheduler_e2e_scheduling_latency_seconds:quantile",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 60
                                }
                            ],
                            "title": "End to End Scheduling Latency",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "individual"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "dtdurations",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 6,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 1,
                            "links": [],
                            "nullPointMode": "null",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum by(instance) (rate(apiserver_request_count{code!~\"2..\"}[5m]))",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "Error Rate",
                                    "refId": "A",
                                    "step": 60
                                },
                                {
                                    "expr": "sum by(instance) (rate(apiserver_request_count[5m]))",
                                    "format": "time_series",
                                    "intervalFactor": 2,
                                    "legendFormat": "Request Rate",
                                    "refId": "B",
                                    "step": 60
                                }
                            ],
                            "title": "API Server Request Rates",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "individual"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "Dashboard Row",
                    "titleSize": "h6"
                }
            ],
            "schemaVersion": 14,
            "sharedCrosshair": false,
            "style": "dark",
            "tags": [],
            "templating": {
                "list": []
            },
            "time": {
                "from": "now-6h",
                "to": "now"
            },
            "timepicker": {
                "refresh_intervals": [
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options": [
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone": "browser",
            "title": "Kubernetes Control Plane Status",
            "version": 3
        },
        "inputs": [
            {
                "name": "DS_PROMETHEUS",
                "pluginId": "prometheus",
                "type": "datasource",
                "value": "prometheus"
            }
        ],
        "overwrite": true
    }
  kubernetes-resource-requests-dashboard.json: |-
    {
        "dashboard": {
            "__inputs": [
                {
                    "description": "",
                    "label": "prometheus",
                    "name": "DS_PROMETHEUS",
                    "pluginId": "prometheus",
                    "pluginName": "Prometheus",
                    "type": "datasource"
                }
            ],
            "annotations": {
                "list": []
            },
            "editable": true,
            "graphTooltip": 0,
            "hideControls": false,
            "links": [],
            "refresh": false,
            "rows": [
                {
                    "collapse": false,
                    "editable": true,
                    "height": "300px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "description": "This represents the total [CPU resource requests](https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/#meaning-of-cpu) in the cluster.\nFor comparison the total [allocatable CPU cores](https://github.com/kubernetes/community/blob/master/contributors/design-proposals/node-allocatable.md) is also shown.",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 1,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 1,
                            "links": [],
                            "nullPointMode": "null",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 9,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "min(sum(kube_node_status_allocatable_cpu_cores) by (instance))",
                                    "hide": false,
                                    "intervalFactor": 2,
                                    "legendFormat": "Allocatable CPU Cores",
                                    "refId": "A",
                                    "step": 20
                                },
                                {
                                    "expr": "max(sum(kube_pod_container_resource_requests_cpu_cores) by (instance))",
                                    "hide": false,
                                    "intervalFactor": 2,
                                    "legendFormat": "Requested CPU Cores",
                                    "refId": "B",
                                    "step": 20
                                }
                            ],
                            "title": "CPU Cores",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "individual"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "short",
                                    "label": "CPU Cores",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 2,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": true
                            },
                            "targets": [
                                {
                                    "expr": "max(sum(kube_pod_container_resource_requests_cpu_cores) by (instance)) / min(sum(kube_node_status_allocatable_cpu_cores) by (instance)) * 100",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 240
                                }
                            ],
                            "thresholds": "80, 90",
                            "title": "CPU Cores",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "110%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": false,
                    "title": "CPU Cores",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "300px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "description": "This represents the total [memory resource requests](https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/#meaning-of-memory) in the cluster.\nFor comparison the total [allocatable memory](https://github.com/kubernetes/community/blob/master/contributors/design-proposals/node-allocatable.md) is also shown.",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 3,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 1,
                            "links": [],
                            "nullPointMode": "null",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 9,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "min(sum(kube_node_status_allocatable_memory_bytes) by (instance))",
                                    "hide": false,
                                    "intervalFactor": 2,
                                    "legendFormat": "Allocatable Memory",
                                    "refId": "A",
                                    "step": 20
                                },
                                {
                                    "expr": "max(sum(kube_pod_container_resource_requests_memory_bytes) by (instance))",
                                    "hide": false,
                                    "intervalFactor": 2,
                                    "legendFormat": "Requested Memory",
                                    "refId": "B",
                                    "step": 20
                                }
                            ],
                            "title": "Memory",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "individual"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "label": "Memory",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 4,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": true
                            },
                            "targets": [
                                {
                                    "expr": "max(sum(kube_pod_container_resource_requests_memory_bytes) by (instance)) / min(sum(kube_node_status_allocatable_memory_bytes) by (instance)) * 100",
                                    "intervalFactor": 2,
                                    "legendFormat": "",
                                    "refId": "A",
                                    "step": 240
                                }
                            ],
                            "thresholds": "80, 90",
                            "title": "Memory",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "110%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": false,
                    "title": "Memory",
                    "titleSize": "h6"
                }
            ],
            "schemaVersion": 14,
            "sharedCrosshair": false,
            "style": "dark",
            "tags": [],
            "templating": {
                "list": []
            },
            "time": {
                "from": "now-3h",
                "to": "now"
            },
            "timepicker": {
                "refresh_intervals": [
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options": [
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone": "browser",
            "title": "Kubernetes Resource Requests",
            "version": 2
        },
        "inputs": [
            {
                "name": "DS_PROMETHEUS",
                "pluginId": "prometheus",
                "type": "datasource",
                "value": "prometheus"
            }
        ],
        "overwrite": true
    }
  nodes-dashboard.json: |-
    {
        "dashboard": {
            "__inputs": [
                {
                    "description": "",
                    "label": "prometheus",
                    "name": "DS_PROMETHEUS",
                    "pluginId": "prometheus",
                    "pluginName": "Prometheus",
                    "type": "datasource"
                }
            ],
            "annotations": {
                "list": []
            },
            "description": "Dashboard to get an overview of one server",
            "editable": true,
            "gnetId": 22,
            "graphTooltip": 0,
            "hideControls": false,
            "links": [],
            "refresh": false,
            "rows": [
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 3,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "100 - (avg by (cpu) (irate(node_cpu{mode=\"idle\", instance=\"$server\"}[5m])) * 100)",
                                    "hide": false,
                                    "intervalFactor": 10,
                                    "legendFormat": "{{cpu}}",
                                    "refId": "A",
                                    "step": 50
                                }
                            ],
                            "title": "Idle CPU",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "percent",
                                    "label": "cpu usage",
                                    "logBase": 1,
                                    "max": 100,
                                    "min": 0,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 9,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "node_load1{instance=\"$server\"}",
                                    "intervalFactor": 4,
                                    "legendFormat": "load 1m",
                                    "refId": "A",
                                    "step": 20,
                                    "target": ""
                                },
                                {
                                    "expr": "node_load5{instance=\"$server\"}",
                                    "intervalFactor": 4,
                                    "legendFormat": "load 5m",
                                    "refId": "B",
                                    "step": 20,
                                    "target": ""
                                },
                                {
                                    "expr": "node_load15{instance=\"$server\"}",
                                    "intervalFactor": 4,
                                    "legendFormat": "load 15m",
                                    "refId": "C",
                                    "step": 20,
                                    "target": ""
                                }
                            ],
                            "title": "System Load",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "percentunit",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 4,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [
                                {
                                    "alias": "node_memory_SwapFree{instance=\"172.17.0.1:9100\",job=\"prometheus\"}",
                                    "yaxis": 2
                                }
                            ],
                            "spaceLength": 10,
                            "span": 9,
                            "stack": true,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "node_memory_MemTotal{instance=\"$server\"} - node_memory_MemFree{instance=\"$server\"} - node_memory_Buffers{instance=\"$server\"} - node_memory_Cached{instance=\"$server\"}",
                                    "hide": false,
                                    "interval": "",
                                    "intervalFactor": 2,
                                    "legendFormat": "memory used",
                                    "metric": "",
                                    "refId": "C",
                                    "step": 10
                                },
                                {
                                    "expr": "node_memory_Buffers{instance=\"$server\"}",
                                    "interval": "",
                                    "intervalFactor": 2,
                                    "legendFormat": "memory buffers",
                                    "metric": "",
                                    "refId": "E",
                                    "step": 10
                                },
                                {
                                    "expr": "node_memory_Cached{instance=\"$server\"}",
                                    "intervalFactor": 2,
                                    "legendFormat": "memory cached",
                                    "metric": "",
                                    "refId": "F",
                                    "step": 10
                                },
                                {
                                    "expr": "node_memory_MemFree{instance=\"$server\"}",
                                    "intervalFactor": 2,
                                    "legendFormat": "memory free",
                                    "metric": "",
                                    "refId": "D",
                                    "step": 10
                                }
                            ],
                            "title": "Memory Usage",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "individual"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "min": "0",
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percent",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 5,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "((node_memory_MemTotal{instance=\"$server\"} - node_memory_MemFree{instance=\"$server\"}  - node_memory_Buffers{instance=\"$server\"} - node_memory_Cached{instance=\"$server\"}) / node_memory_MemTotal{instance=\"$server\"}) * 100",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 60,
                                    "target": ""
                                }
                            ],
                            "thresholds": "80, 90",
                            "title": "Memory Usage",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 6,
                            "isNew": true,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [
                                {
                                    "alias": "read",
                                    "yaxis": 1
                                },
                                {
                                    "alias": "{instance=\"172.17.0.1:9100\"}",
                                    "yaxis": 2
                                },
                                {
                                    "alias": "io time",
                                    "yaxis": 2
                                }
                            ],
                            "spaceLength": 10,
                            "span": 9,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum by (instance) (rate(node_disk_bytes_read{instance=\"$server\"}[2m]))",
                                    "hide": false,
                                    "intervalFactor": 4,
                                    "legendFormat": "read",
                                    "refId": "A",
                                    "step": 20,
                                    "target": ""
                                },
                                {
                                    "expr": "sum by (instance) (rate(node_disk_bytes_written{instance=\"$server\"}[2m]))",
                                    "intervalFactor": 4,
                                    "legendFormat": "written",
                                    "refId": "B",
                                    "step": 20
                                },
                                {
                                    "expr": "sum by (instance) (rate(node_disk_io_time_ms{instance=\"$server\"}[2m]))",
                                    "intervalFactor": 4,
                                    "legendFormat": "io time",
                                    "refId": "C",
                                    "step": 20
                                }
                            ],
                            "title": "Disk I/O",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "ms",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(50, 172, 45, 0.97)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(245, 54, 54, 0.9)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "percentunit",
                            "gauge": {
                                "maxValue": 1,
                                "minValue": 0,
                                "show": true,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "hideTimeOverride": false,
                            "id": 7,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "(sum(node_filesystem_size{device!=\"rootfs\",instance=\"$server\"}) - sum(node_filesystem_free{device!=\"rootfs\",instance=\"$server\"})) / sum(node_filesystem_size{device!=\"rootfs\",instance=\"$server\"})",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 60,
                                    "target": ""
                                }
                            ],
                            "thresholds": "0.75, 0.9",
                            "title": "Disk Space Usage",
                            "transparent": false,
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "current"
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 8,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [
                                {
                                    "alias": "transmitted",
                                    "yaxis": 2
                                }
                            ],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "rate(node_network_receive_bytes{instance=\"$server\",device!~\"lo\"}[5m])",
                                    "hide": false,
                                    "intervalFactor": 2,
                                    "legendFormat": "{{device}}",
                                    "refId": "A",
                                    "step": 10,
                                    "target": ""
                                }
                            ],
                            "title": "Network Received",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        },
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 10,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [
                                {
                                    "alias": "transmitted",
                                    "yaxis": 2
                                }
                            ],
                            "spaceLength": 10,
                            "span": 6,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "rate(node_network_transmit_bytes{instance=\"$server\",device!~\"lo\"}[5m])",
                                    "hide": false,
                                    "intervalFactor": 2,
                                    "legendFormat": "{{device}}",
                                    "refId": "B",
                                    "step": 10,
                                    "target": ""
                                }
                            ],
                            "title": "Network Transmitted",
                            "tooltip": {
                                "msResolution": false,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                }
            ],
            "schemaVersion": 14,
            "sharedCrosshair": false,
            "style": "dark",
            "tags": [],
            "templating": {
                "list": [
                    {
                        "allValue": null,
                        "current": {},
                        "datasource": "${DS_PROMETHEUS}",
                        "hide": 0,
                        "includeAll": false,
                        "label": null,
                        "multi": false,
                        "name": "server",
                        "options": [],
                        "query": "label_values(node_boot_time, instance)",
                        "refresh": 1,
                        "regex": "",
                        "sort": 0,
                        "tagValuesQuery": "",
                        "tags": [],
                        "tagsQuery": "",
                        "type": "query",
                        "useTags": false
                    }
                ]
            },
            "time": {
                "from": "now-1h",
                "to": "now"
            },
            "timepicker": {
                "refresh_intervals": [
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options": [
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone": "browser",
            "title": "Nodes",
            "version": 2
        },
        "inputs": [
            {
                "name": "DS_PROMETHEUS",
                "pluginId": "prometheus",
                "type": "datasource",
                "value": "prometheus"
            }
        ],
        "overwrite": true
    }
  pods-dashboard.json: |-
    {
        "dashboard": {
            "__inputs": [
                {
                    "description": "",
                    "label": "prometheus",
                    "name": "DS_PROMETHEUS",
                    "pluginId": "prometheus",
                    "pluginName": "Prometheus",
                    "type": "datasource"
                }
            ],
            "annotations": {
                "list": []
            },
            "editable": true,
            "graphTooltip": 1,
            "hideControls": false,
            "links": [],
            "refresh": false,
            "rows": [
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 1,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": true,
                                "avg": true,
                                "current": true,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": true,
                                "show": true,
                                "total": false,
                                "values": true
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 12,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum by(container_name) (container_memory_usage_bytes{pod_name=\"$pod\", container_name=~\"$container\", container_name!=\"POD\"})",
                                    "interval": "10s",
                                    "intervalFactor": 1,
                                    "legendFormat": "Current: {{ container_name }}",
                                    "metric": "container_memory_usage_bytes",
                                    "refId": "A",
                                    "step": 15
                                },
                                {
                                    "expr": "kube_pod_container_resource_requests_memory_bytes{pod=\"$pod\", container=~\"$container\"}",
                                    "interval": "10s",
                                    "intervalFactor": 2,
                                    "legendFormat": "Requested: {{ container }}",
                                    "metric": "kube_pod_container_resource_requests_memory_bytes",
                                    "refId": "B",
                                    "step": 20
                                },
                                {
                                    "expr": "kube_pod_container_resource_limits_memory_bytes{pod=\"$pod\", container=~\"$container\"}",
                                    "interval": "10s",
                                    "intervalFactor": 2,
                                    "legendFormat": "Limit: {{ container }}",
                                    "metric": "kube_pod_container_resource_limits_memory_bytes",
                                    "refId": "C",
                                    "step": 20
                                }
                            ],
                            "title": "Memory Usage",
                            "tooltip": {
                                "msResolution": true,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 2,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": true,
                                "avg": true,
                                "current": true,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": true,
                                "show": true,
                                "total": false,
                                "values": true
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 12,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sum by (container_name)(rate(container_cpu_usage_seconds_total{image!=\"\",container_name!=\"POD\",pod_name=\"$pod\"}[1m]))",
                                    "intervalFactor": 2,
                                    "legendFormat": "{{ container_name }}",
                                    "refId": "A",
                                    "step": 30
                                },
                                {
                                    "expr": "kube_pod_container_resource_requests_cpu_cores{pod=\"$pod\", container=~\"$container\"}",
                                    "interval": "10s",
                                    "intervalFactor": 2,
                                    "legendFormat": "Requested: {{ container }}",
                                    "metric": "kube_pod_container_resource_requests_cpu_cores",
                                    "refId": "B",
                                    "step": 20
                                },
                                {
                                    "expr": "kube_pod_container_resource_limits_cpu_cores{pod=\"$pod\", container=~\"$container\"}",
                                    "interval": "10s",
                                    "intervalFactor": 2,
                                    "legendFormat": "Limit: {{ container }}",
                                    "metric": "kube_pod_container_resource_limits_memory_bytes",
                                    "refId": "C",
                                    "step": 20
                                }
                            ],
                            "title": "CPU Usage",
                            "tooltip": {
                                "msResolution": true,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "editable": true,
                    "height": "250px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 3,
                            "isNew": false,
                            "legend": {
                                "alignAsTable": true,
                                "avg": true,
                                "current": true,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": true,
                                "show": true,
                                "total": false,
                                "values": true
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 12,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "sort_desc(sum by (pod_name) (rate(container_network_receive_bytes_total{pod_name=\"$pod\"}[1m])))",
                                    "intervalFactor": 2,
                                    "legendFormat": "{{ pod_name }}",
                                    "refId": "A",
                                    "step": 30
                                }
                            ],
                            "title": "Network I/O",
                            "tooltip": {
                                "msResolution": true,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "bytes",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "logBase": 1,
                                    "show": true
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "New Row",
                    "titleSize": "h6"
                }
            ],
            "schemaVersion": 14,
            "sharedCrosshair": false,
            "style": "dark",
            "tags": [],
            "templating": {
                "list": [
                    {
                        "allValue": ".*",
                        "current": {},
                        "datasource": "${DS_PROMETHEUS}",
                        "hide": 0,
                        "includeAll": true,
                        "label": "Namespace",
                        "multi": false,
                        "name": "namespace",
                        "options": [],
                        "query": "label_values(kube_pod_info, namespace)",
                        "refresh": 1,
                        "regex": "",
                        "sort": 0,
                        "tagValuesQuery": "",
                        "tags": [],
                        "tagsQuery": "",
                        "type": "query",
                        "useTags": false
                    },
                    {
                        "allValue": null,
                        "current": {},
                        "datasource": "${DS_PROMETHEUS}",
                        "hide": 0,
                        "includeAll": false,
                        "label": "Pod",
                        "multi": false,
                        "name": "pod",
                        "options": [],
                        "query": "label_values(kube_pod_info{namespace=~\"$namespace\"}, pod)",
                        "refresh": 1,
                        "regex": "",
                        "sort": 0,
                        "tagValuesQuery": "",
                        "tags": [],
                        "tagsQuery": "",
                        "type": "query",
                        "useTags": false
                    },
                    {
                        "allValue": ".*",
                        "current": {},
                        "datasource": "${DS_PROMETHEUS}",
                        "hide": 0,
                        "includeAll": true,
                        "label": "Container",
                        "multi": false,
                        "name": "container",
                        "options": [],
                        "query": "label_values(kube_pod_container_info{namespace=\"$namespace\", pod=\"$pod\"}, container)",
                        "refresh": 1,
                        "regex": "",
                        "sort": 0,
                        "tagValuesQuery": "",
                        "tags": [],
                        "tagsQuery": "",
                        "type": "query",
                        "useTags": false
                    }
                ]
            },
            "time": {
                "from": "now-6h",
                "to": "now"
            },
            "timepicker": {
                "refresh_intervals": [
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options": [
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone": "browser",
            "title": "Pods",
            "version": 1
        },
        "inputs": [
            {
                "name": "DS_PROMETHEUS",
                "pluginId": "prometheus",
                "type": "datasource",
                "value": "prometheus"
            }
        ],
        "overwrite": true
    }
  statefulset-dashboard.json: |-
    {
        "dashboard": {
            "__inputs": [
                {
                    "description": "",
                    "label": "prometheus",
                    "name": "DS_PROMETHEUS",
                    "pluginId": "prometheus",
                    "pluginName": "Prometheus",
                    "type": "datasource"
                }
            ],
            "annotations": {
                "list": []
            },
            "editable": true,
            "graphTooltip": 1,
            "hideControls": false,
            "links": [],
            "rows": [
                {
                    "collapse": false,
                    "height": "200px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 8,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "cores",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 4,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": true
                            },
                            "targets": [
                                {
                                    "expr": "sum(rate(container_cpu_usage_seconds_total{namespace=\"$statefulset_namespace\",pod_name=~\"$statefulset_name.*\"}[3m]))",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "CPU",
                            "type": "singlestat",
                            "valueFontSize": "110%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 9,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "GB",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "80%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 4,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": true
                            },
                            "targets": [
                                {
                                    "expr": "sum(container_memory_usage_bytes{namespace=\"$statefulset_namespace\",pod_name=~\"$statefulset_name.*\"}) / 1024^3",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Memory",
                            "type": "singlestat",
                            "valueFontSize": "110%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "Bps",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": false
                            },
                            "id": 7,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfix": "",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 4,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": true
                            },
                            "targets": [
                                {
                                    "expr": "sum(rate(container_network_transmit_bytes_total{namespace=\"$statefulset_namespace\",pod_name=~\"$statefulset_name.*\"}[3m])) + sum(rate(container_network_receive_bytes_total{namespace=\"$statefulset_namespace\",pod_name=~\"$statefulset_name.*\"}[3m]))",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Network",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": false,
                    "title": "Dashboard Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "height": "100px",
                    "panels": [
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": false
                            },
                            "id": 5,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "max(kube_statefulset_replicas{statefulset=\"$statefulset_name\",namespace=\"$statefulset_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "metric": "kube_statefulset_replicas",
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Desired Replicas",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 6,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "min(kube_statefulset_status_replicas{statefulset=\"$statefulset_name\",namespace=\"$statefulset_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Available Replicas",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 3,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "max(kube_statefulset_status_observed_generation{statefulset=\"$statefulset_name\",namespace=\"$statefulset_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Observed Generation",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        },
                        {
                            "colorBackground": false,
                            "colorValue": false,
                            "colors": [
                                "rgba(245, 54, 54, 0.9)",
                                "rgba(237, 129, 40, 0.89)",
                                "rgba(50, 172, 45, 0.97)"
                            ],
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "format": "none",
                            "gauge": {
                                "maxValue": 100,
                                "minValue": 0,
                                "show": false,
                                "thresholdLabels": false,
                                "thresholdMarkers": true
                            },
                            "id": 2,
                            "links": [],
                            "mappingType": 1,
                            "mappingTypes": [
                                {
                                    "name": "value to text",
                                    "value": 1
                                },
                                {
                                    "name": "range to text",
                                    "value": 2
                                }
                            ],
                            "maxDataPoints": 100,
                            "nullPointMode": "connected",
                            "postfixFontSize": "50%",
                            "prefix": "",
                            "prefixFontSize": "50%",
                            "rangeMaps": [
                                {
                                    "from": "null",
                                    "text": "N/A",
                                    "to": "null"
                                }
                            ],
                            "span": 3,
                            "sparkline": {
                                "fillColor": "rgba(31, 118, 189, 0.18)",
                                "full": false,
                                "lineColor": "rgb(31, 120, 193)",
                                "show": false
                            },
                            "targets": [
                                {
                                    "expr": "max(kube_statefulset_metadata_generation{statefulset=\"$statefulset_name\",namespace=\"$statefulset_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "refId": "A",
                                    "step": 600
                                }
                            ],
                            "title": "Metadata Generation",
                            "type": "singlestat",
                            "valueFontSize": "80%",
                            "valueMaps": [
                                {
                                    "op": "=",
                                    "text": "N/A",
                                    "value": "null"
                                }
                            ],
                            "valueName": "avg"
                        }
                    ],
                    "showTitle": false,
                    "title": "Dashboard Row",
                    "titleSize": "h6"
                },
                {
                    "collapse": false,
                    "height": "350px",
                    "panels": [
                        {
                            "aliasColors": {},
                            "bars": false,
                            "dashLength": 10,
                            "dashes": false,
                            "datasource": "${DS_PROMETHEUS}",
                            "editable": true,
                            "error": false,
                            "fill": 1,
                            "grid": {
                                "threshold1Color": "rgba(216, 200, 27, 0.27)",
                                "threshold2Color": "rgba(234, 112, 112, 0.22)"
                            },
                            "id": 1,
                            "isNew": true,
                            "legend": {
                                "alignAsTable": false,
                                "avg": false,
                                "current": false,
                                "hideEmpty": false,
                                "hideZero": false,
                                "max": false,
                                "min": false,
                                "rightSide": false,
                                "show": true,
                                "total": false
                            },
                            "lines": true,
                            "linewidth": 2,
                            "links": [],
                            "nullPointMode": "connected",
                            "percentage": false,
                            "pointradius": 5,
                            "points": false,
                            "renderer": "flot",
                            "seriesOverrides": [],
                            "spaceLength": 10,
                            "span": 12,
                            "stack": false,
                            "steppedLine": false,
                            "targets": [
                                {
                                    "expr": "min(kube_statefulset_status_replicas{statefulset=\"$statefulset_name\",namespace=\"$statefulset_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "legendFormat": "available",
                                    "refId": "B",
                                    "step": 30
                                },
                                {
                                    "expr": "max(kube_statefulset_replicas{statefulset=\"$statefulset_name\",namespace=\"$statefulset_namespace\"}) without (instance, pod)",
                                    "intervalFactor": 2,
                                    "legendFormat": "desired",
                                    "refId": "E",
                                    "step": 30
                                }
                            ],
                            "title": "Replicas",
                            "tooltip": {
                                "msResolution": true,
                                "shared": true,
                                "sort": 0,
                                "value_type": "cumulative"
                            },
                            "type": "graph",
                            "xaxis": {
                                "mode": "time",
                                "show": true,
                                "values": []
                            },
                            "yaxes": [
                                {
                                    "format": "none",
                                    "label": "",
                                    "logBase": 1,
                                    "show": true
                                },
                                {
                                    "format": "short",
                                    "label": "",
                                    "logBase": 1,
                                    "show": false
                                }
                            ]
                        }
                    ],
                    "showTitle": false,
                    "title": "Dashboard Row",
                    "titleSize": "h6"
                }
            ],
            "schemaVersion": 14,
            "sharedCrosshair": false,
            "style": "dark",
            "tags": [],
            "templating": {
                "list": [
                    {
                        "allValue": ".*",
                        "current": {},
                        "datasource": "${DS_PROMETHEUS}",
                        "hide": 0,
                        "includeAll": false,
                        "label": "Namespace",
                        "multi": false,
                        "name": "statefulset_namespace",
                        "options": [],
                        "query": "label_values(kube_statefulset_metadata_generation, namespace)",
                        "refresh": 1,
                        "regex": "",
                        "sort": 0,
                        "tagValuesQuery": null,
                        "tags": [],
                        "tagsQuery": "",
                        "type": "query",
                        "useTags": false
                    },
                    {
                        "allValue": null,
                        "current": {},
                        "datasource": "${DS_PROMETHEUS}",
                        "hide": 0,
                        "includeAll": false,
                        "label": "StatefulSet",
                        "multi": false,
                        "name": "statefulset_name",
                        "options": [],
                        "query": "label_values(kube_statefulset_metadata_generation{namespace=\"$statefulset_namespace\"}, statefulset)",
                        "refresh": 1,
                        "regex": "",
                        "sort": 0,
                        "tagValuesQuery": "",
                        "tags": [],
                        "tagsQuery": "statefulset",
                        "type": "query",
                        "useTags": false
                    }
                ]
            },
            "time": {
                "from": "now-6h",
                "to": "now"
            },
            "timepicker": {
                "refresh_intervals": [
                    "5s",
                    "10s",
                    "30s",
                    "1m",
                    "5m",
                    "15m",
                    "30m",
                    "1h",
                    "2h",
                    "1d"
                ],
                "time_options": [
                    "5m",
                    "15m",
                    "1h",
                    "6h",
                    "12h",
                    "24h",
                    "2d",
                    "7d",
                    "30d"
                ]
            },
            "timezone": "browser",
            "title": "StatefulSet",
            "version": 1
        },
        "inputs": [
            {
                "name": "DS_PROMETHEUS",
                "pluginId": "prometheus",
                "type": "datasource",
                "value": "prometheus"
            }
        ],
        "overwrite": true
    }
  
  prometheus-datasource.json: |+
    {
      "access": "proxy",
      "basicAuth": false,
      "name": "prometheus",
      "type": "prometheus",
      "url": "http://mon:9090"
    }

---
# Source: kube-prometheus/charts/grafana/templates/pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  labels:
    app: mon-grafana
    chart: "grafana-0.0.37"
    heritage: "Tiller"
    release: "mon"
  name: mon-grafana
  namespace: monitoring
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: gold
  resources:
    requests:
      storage: "10Gi"
---
# Source: kube-prometheus/charts/exporter-kube-state/templates/serviceaccount.yaml

apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: exporter-kube-state
    chart: exporter-kube-state-0.2.6
    heritage: Tiller
    release: mon
  name: mon-exporter-kube-state
  namespace: monitoring
imagePullSecrets: 
  []
  

---
# Source: kube-prometheus/charts/exporter-node/templates/serviceaccount.yaml

apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: exporter-node
    chart: exporter-node-0.4.6
    heritage: Tiller
    release: mon
  name: mon-exporter-node
  namespace: monitoring
imagePullSecrets: 
  []
  

---
# Source: kube-prometheus/charts/grafana/templates/serviceaccount.yaml

apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: mon-grafana
    chart: grafana-0.0.37
    heritage: Tiller
    release: mon
  name: mon-grafana
  namespace: monitoring
imagePullSecrets: 
  []
  

---
# Source: kube-prometheus/charts/prometheus/templates/serviceaccount.yaml

apiVersion: v1
kind: ServiceAccount
metadata:
  labels:
    app: prometheus
    chart: prometheus-0.0.51
    heritage: Tiller
    release: mon
  name: mon-prometheus
  namespace: monitoring
imagePullSecrets: 
  []
  

---
# Source: kube-prometheus/charts/alertmanager/templates/psp-clusterrole.yaml

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    app: alertmanager
    chart: alertmanager-0.1.7
    heritage: Tiller
    release: mon
  name: psp-mon-alertmanager
  namespace: monitoring
rules:
- apiGroups: ['extensions']
  resources: ['podsecuritypolicies']
  verbs:     ['use']
  resourceNames:
  - mon-alertmanager
---
# Source: kube-prometheus/charts/exporter-kube-state/templates/clusterrole.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: exporter-kube-state
    chart: exporter-kube-state-0.2.6
    heritage: Tiller
    release: mon
  name: mon-exporter-kube-state
  namespace: monitoring
rules:
- apiGroups: [""]
  resources:
  - namespaces
  - nodes
  - pods
  - services
  - resourcequotas
  - replicationcontrollers
  - limitranges
  - persistentvolumeclaims
  - persistentvolumes
  - endpoints
  verbs: ["list", "watch"]
- apiGroups: ["extensions"]
  resources:
  - daemonsets
  - deployments
  - replicasets
  verbs: ["list", "watch"]
- apiGroups: ["apps"]
  resources:
  - statefulsets
  verbs: ["list", "watch"]
- apiGroups: ["batch"]
  resources:
  - cronjobs
  - jobs
  verbs: ["list", "watch"]
- apiGroups: ["autoscaling"]
  resources:
  - horizontalpodautoscalers
  verbs: ["list", "watch"]

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/psp-clusterrole.yaml

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    app: exporter-kube-state
    chart: exporter-kube-state-0.2.6
    heritage: Tiller
    release: mon
  name: psp-mon-exporter-kube-state
  namespace: monitoring
rules:
- apiGroups: ['extensions']
  resources: ['podsecuritypolicies']
  verbs:     ['use']
  resourceNames:
  - mon-exporter-kube-state
---
# Source: kube-prometheus/charts/exporter-node/templates/psp-clusterrole.yaml

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    app: exporter-node
    chart: exporter-node-0.4.6
    heritage: Tiller
    release: mon
  name: psp-mon-exporter-node
  namespace: monitoring
rules:
- apiGroups: ['extensions']
  resources: ['podsecuritypolicies']
  verbs:     ['use']
  resourceNames:
  - mon-exporter-node

---
# Source: kube-prometheus/charts/grafana/templates/psp-clusterrole.yaml

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    app: mon-grafana
    chart: grafana-0.0.37
    heritage: Tiller
    release: mon
  name: psp-mon-grafana
  namespace: monitoring
rules:
- apiGroups: ['extensions']
  resources: ['podsecuritypolicies']
  verbs:     ['use']
  resourceNames:
  - mon-grafana

---
# Source: kube-prometheus/charts/prometheus/templates/clusterrole.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    app: prometheus
    chart: prometheus-0.0.51
    heritage: Tiller
    release: mon
  name: mon-prometheus
  namespace: monitoring
rules:
- apiGroups: [""]
  resources:
  - nodes
  - services
  - endpoints
  - pods
  verbs: ["get", "list", "watch"]
- apiGroups: [""]
  resources:
  - configmaps
  verbs: ["get"]
- apiGroups: [""]
  resources:
  - nodes/metrics
  verbs: ["get"]
- nonResourceURLs: ["/metrics"]
  verbs: ["get"]

---
# Source: kube-prometheus/charts/prometheus/templates/psp-clusterrole.yaml

kind: ClusterRole
apiVersion: rbac.authorization.k8s.io/v1
metadata:
  labels:
    app: prometheus
    chart: prometheus-0.0.51
    heritage: Tiller
    release: mon
  name: psp-mon-prometheus
  namespace: monitoring
rules:
- apiGroups: ['extensions']
  resources: ['podsecuritypolicies']
  verbs:     ['use']
  resourceNames:
  - mon-prometheus

---
# Source: kube-prometheus/charts/alertmanager/templates/psp-clusterrolebinding.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: alertmanager
    chart: alertmanager-0.1.7
    heritage: Tiller
    release: mon
  name: psp-mon-alertmanager
  namespace: monitoring
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: psp-mon-alertmanager
subjects:
  - kind: ServiceAccount
    name: default
    namespace: monitoring

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/clusterrolebinding.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: exporter-kube-state
    chart: exporter-kube-state-0.2.6
    heritage: Tiller
    release: mon
  name: mon-exporter-kube-state
  namespace: monitoring
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: mon-exporter-kube-state
subjects:
  - kind: ServiceAccount
    name: mon-exporter-kube-state
    namespace: monitoring

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/psp-clusterrolebinding.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: exporter-kube-state
    chart: exporter-kube-state-0.2.6
    heritage: Tiller
    release: mon
  name: psp-mon-exporter-kube-state
  namespace: monitoring
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: psp-mon-exporter-kube-state
subjects:
  - kind: ServiceAccount
    name: mon-exporter-kube-state
    namespace: monitoring

---
# Source: kube-prometheus/charts/exporter-node/templates/psp-clusterrolebinding.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: exporter-node
    chart: exporter-node-0.4.6
    heritage: Tiller
    release: mon
  name: psp-mon-exporter-node
  namespace: monitoring
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: psp-mon-exporter-node
subjects:
  - kind: ServiceAccount
    name: mon-exporter-node
    namespace: monitoring

---
# Source: kube-prometheus/charts/grafana/templates/psp-clusterrolebinding.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: mon-grafana
    chart: grafana-0.0.37
    heritage: Tiller
    release: mon
  name: psp-mon-grafana
  namespace: monitoring
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: psp-mon-grafana
subjects:
  - kind: ServiceAccount
    name: mon-grafana
    namespace: monitoring

---
# Source: kube-prometheus/charts/prometheus/templates/clusterrolebinding.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: prometheus
    chart: prometheus-0.0.51
    heritage: Tiller
    release: mon
  name: mon-prometheus
  namespace: monitoring
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: mon-prometheus
subjects:
  - kind: ServiceAccount
    name: mon-prometheus
    namespace: monitoring


---
# Source: kube-prometheus/charts/prometheus/templates/psp-clusterrolebinding.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    app: prometheus
    chart: prometheus-0.0.51
    heritage: Tiller
    release: mon
  name: psp-mon-prometheus
  namespace: monitoring
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: psp-mon-prometheus
subjects:
  - kind: ServiceAccount
    name: mon-prometheus
    namespace: monitoring

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/role.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  labels:
    app: exporter-kube-state
    chart: exporter-kube-state-0.2.6
    heritage: Tiller
    release: mon
  name: mon-exporter-kube-state
  namespace: monitoring
rules:
- apiGroups: [""]
  resources: ["pods"]
  verbs: ["get"]
- apiGroups: ["extensions"]
  resources: ["deployments"]
  resourceNames: [mon-exporter-kube-state]
  verbs: ["get", "update"]

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/rolebinding.yaml

apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  labels:
    app: exporter-kube-state
    chart: exporter-kube-state-0.2.6
    heritage: Tiller
    release: mon
  name: mon-exporter-kube-state
  namespace: monitoring
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: mon-exporter-kube-state
subjects:
- kind: ServiceAccount
  name: mon-exporter-kube-state

---
# Source: kube-prometheus/charts/alertmanager/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    alertmanager: mon
    app: alertmanager
    chart: alertmanager-0.1.7
    heritage: Tiller
    release: mon
  name: mon-alertmanager
  namespace: monitoring
spec:
  clusterIP: ""
  ports:
    - name: http
      port: 9093
      targetPort: 9093
      protocol: TCP
  selector:
    alertmanager: mon
    app: alertmanager
  type: "ClusterIP"

---
# Source: kube-prometheus/charts/exporter-kube-controller-manager/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app: exporter-kube-controller-manager
    component: kube-controller-manager
    heritage: Tiller
    release: mon
    chart: exporter-kube-controller-manager-0.1.10
  name: mon-exporter-kube-controller-manager
  namespace: kube-system
spec:
  clusterIP: None
  ports:
    - name: http-metrics
      port: 10252
      protocol: TCP
      targetPort: 10252
  selector:
    k8s-app: kube-controller-manager
  type: ClusterIP

---
# Source: kube-prometheus/charts/exporter-kube-dns/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app: exporter-kube-dns
    component: kube-dns
    heritage: Tiller
    release: mon
    chart: exporter-kube-dns-0.1.7
  name: mon-exporter-kube-dns
  namespace: kube-system
spec:
  clusterIP: None
  ports:
    - name: http-metrics-dnsmasq
      port: 10054
      protocol: TCP
      targetPort: 10054
    - name: http-metrics-skydns
      port: 10055
      protocol: TCP
      targetPort: 10055
  selector:
    k8s-app: kube-dns
  type: ClusterIP

---
# Source: kube-prometheus/charts/exporter-kube-etcd/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app: exporter-kube-etcd
    component: kube-etcd
    heritage: Tiller
    release: mon
    chart: exporter-kube-etcd-0.1.15
  name: mon-exporter-kube-etcd
  namespace: kube-system
spec:
  clusterIP: None
  ports:
    - name: http-metrics
      port: 4001
      protocol: TCP
      targetPort: 4001
  selector:
    k8s-app: etcd-server
  type: ClusterIP

---
# Source: kube-prometheus/charts/exporter-kube-scheduler/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app: exporter-kube-scheduler
    component: kube-scheduler
    heritage: Tiller
    release: mon
    chart: exporter-kube-scheduler-0.1.9
  name: mon-exporter-kube-scheduler
  namespace: kube-system
spec:
  clusterIP: None
  ports:
    - name: http-metrics
      port: 10251
      protocol: TCP
      targetPort: 10251
  selector:
    k8s-app: kube-scheduler
  type: ClusterIP

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: mon-exporter-kube-state
  namespace: monitoring
  labels:
    app: exporter-kube-state
    component: kube-state
    heritage: Tiller
    release: mon
    chart: exporter-kube-state-0.2.6
spec:
  type: ClusterIP
  ports:
  - port: 80
    targetPort: 8080
    protocol: TCP
    name: kube-state-metrics
  selector:
    app: mon-exporter-kube-state
    component: kube-state
    release: mon

---
# Source: kube-prometheus/charts/exporter-node/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: mon-exporter-node
  namespace: monitoring
  labels:
    app: exporter-node
    component: node-exporter
    heritage: Tiller
    release: mon
    chart: exporter-node-0.4.6
spec:
  type: ClusterIP
  ports:
  - name: metrics
    port: 9100
    targetPort: metrics
    protocol: TCP
  selector:
    app: mon-exporter-node
    component: node-exporter
    release: mon

---
# Source: kube-prometheus/charts/grafana/templates/svc.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app: mon-grafana
    chart: "grafana-0.0.37"
    heritage: "Tiller"
    release: "mon"
  name: mon-grafana
  namespace: monitoring
spec:
  ports:
    - name: "http"
      port: 80
      protocol: TCP
      targetPort: 3000
  selector:
    app: mon-grafana
  type: "ClusterIP"
---
# Source: kube-prometheus/charts/prometheus/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  labels:
    app: prometheus
    chart: prometheus-0.0.51
    heritage: Tiller
    prometheus: "mon"
    release: mon
  name: mon-prometheus
  namespace: monitoring
spec:
  sessionAffinity: "None"
  clusterIP: ""
  ports:
    - name: http
      port: 9090
      targetPort: 9090
      protocol: TCP
  selector:
    app: prometheus
    prometheus: mon-prometheus
  type: "LoadBalancer"


---
# Source: kube-prometheus/charts/exporter-node/templates/daemonset.yaml

apiVersion: extensions/v1beta1
kind: DaemonSet
metadata:
  labels:
    app: exporter-node
    chart: exporter-node-0.4.6
    component: node-exporter
    heritage: Tiller
    release: mon
  name: mon-exporter-node
  namespace: monitoring
spec:
  template:
    metadata:
      labels:
        app: mon-exporter-node
        component: node-exporter
        release: mon
    spec:
      containers:
        - name: node-exporter
          image: "quay.io/prometheus/node-exporter:v0.15.2"
          imagePullPolicy: "IfNotPresent"
          args:
          - --web.listen-address=0.0.0.0:9100
          - --path.procfs=/host/proc
          - --path.sysfs=/host/sys
          
          ports:
            - name: metrics
              containerPort: 9100
              hostPort: 9100
          resources:
            limits:
              cpu: 200m
              memory: 50Mi
            requests:
              cpu: 100m
              memory: 30Mi
            
          volumeMounts:
          - mountPath: /host/proc
            name: proc
            readOnly: true
          - mountPath: /host/sys
            name: sys
            readOnly: true
          
      serviceAccountName: mon-exporter-node
      tolerations:
        - effect: NoSchedule
          operator: Exists
        
      hostNetwork: true
      hostPID: true
      volumes:
      - hostPath:
          path: /proc
        name: proc
      - hostPath:
          path: /sys
        name: sys
      

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/deployment.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: mon-exporter-kube-state
  namespace: monitoring
  labels:
    app: exporter-kube-state
    component: kube-state
    heritage: Tiller
    release: mon
    chart: exporter-kube-state-0.2.6
    version: "v1.2.0"
spec:
  replicas: 1
  revisionHistoryLimit: 10
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxUnavailable: 0
  selector:
    matchLabels:
      app: mon-exporter-kube-state
  template:
    metadata:
      labels:
        app: mon-exporter-kube-state
        component: kube-state
        release: mon
        version: "v1.2.0"
    spec:
      containers:
      - name: exporter-kube-state
        image: "gcr.io/google_containers/kube-state-metrics:v1.2.0"
        imagePullPolicy: IfNotPresent
        ports:
        - containerPort: 8080
          protocol: TCP
        livenessProbe:
          httpGet:
            path: /
            port: 8080
          initialDelaySeconds: 30
          timeoutSeconds: 30
        readinessProbe:
          httpGet:
            path: /
            port: 8080
          initialDelaySeconds: 30
          timeoutSeconds: 5
      - name: exporter-kube-state-addon-resizer
        image: "gcr.io/google_containers/addon-resizer:1.7"
        env:
          - name: MY_POD_NAME
            valueFrom:
              fieldRef:
                fieldPath: metadata.name
          - name: MY_POD_NAMESPACE
            valueFrom:
              fieldRef:
                fieldPath: metadata.namespace
        command:
          - /pod_nanny
          - --container=exporter-kube-state
          - --cpu=100m
          - --extra-cpu=1m
          - --memory=130Mi
          - --extra-memory=2Mi
          - --threshold=5
          - --deployment=mon-exporter-kube-state
        resources:
            limits:
              cpu: 100m
              memory: 30Mi
            requests:
              cpu: 100m
              memory: 30Mi
            
      serviceAccountName: mon-exporter-kube-state

---
# Source: kube-prometheus/charts/grafana/templates/grafana-deployment.yaml
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  labels:
    app: mon-grafana
    chart: "grafana-0.0.37"
    heritage: "Tiller"
    release: "mon"
  name: mon-grafana
  namespace: monitoring
spec:
  replicas: 1
  template:
    metadata:
      annotations:
      labels:
        app: mon-grafana
        release: "mon"
    spec:
      containers:
      - name: grafana
        image: grafana/grafana:5.0.0
        env:
        - name: GF_AUTH_BASIC_ENABLED
          value: "true"
        - name: GF_AUTH_ANONYMOUS_ENABLED
          value: "true"
        - name: GF_SECURITY_ADMIN_USER
          valueFrom:
            secretKeyRef:
              name: mon-grafana
              key: user
        - name: GF_SECURITY_ADMIN_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mon-grafana
              key: password
        volumeMounts:
        - name: grafana-storage
          mountPath: /var/lib/grafana
        ports:
        - name: web
          containerPort: 3000
        readinessProbe:
          httpGet:
            path: /api/health
            port: 3000
          periodSeconds: 1
          timeoutSeconds: 1
          successThreshold: 1
          failureThreshold: 10
      - name: grafana-watcher
        image: quay.io/coreos/grafana-watcher:v0.0.8
        args:
          - '--watch-dir=/var/grafana-dashboards'
          - '--grafana-url=http://127.0.0.1:3000'
        env:
        - name: GRAFANA_USER
          valueFrom:
            secretKeyRef:
              name: mon-grafana
              key: user
        - name: GRAFANA_PASSWORD
          valueFrom:
            secretKeyRef:
              name: mon-grafana
              key: password
        volumeMounts:
          - name: grafana-dashboards
            mountPath: /var/grafana-dashboards
      serviceAccountName: mon-grafana
      volumes:
        - name: grafana-storage
          persistentVolumeClaim:
            claimName: mon-grafana
        - name: grafana-dashboards
          configMap:
            name: mon-grafana

---
# Source: kube-prometheus/charts/grafana/templates/ingress.yaml

apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  annotations:
    kubernetes.io/ingress.class: nginx
    kubernetes.io/tls-acme: "true"
    
  labels:
    app: grafana
    chart: "grafana-0.0.37"
    heritage: "Tiller"
    release: "mon"
  name: mon-grafana
  namespace: monitoring
spec:
  rules:
    - host: grafana.test.akomljen.com
      http:
        paths:
          - path: ""
            backend:
              serviceName: mon-grafana
              servicePort: 80
  tls:
    - hosts:
      - grafana.test.akomljen.com
      secretName: grafana-tls
    

---
# Source: kube-prometheus/charts/alertmanager/templates/alertmanager.yaml
apiVersion: monitoring.coreos.com/v1
kind: Alertmanager
metadata:
  labels:
    alertmanager: mon
    app: alertmanager
    chart: alertmanager-0.1.7
    heritage: Tiller
    release: mon
  name: mon
  namespace: monitoring
spec:
  baseImage: "quay.io/prometheus/alertmanager"
  externalUrl: http://mon-alertmanager.monitoring:9093
  paused: false
  replicas: 1
  resources:
    {}
    
  storage:
    volumeClaimTemplate:
      spec:
        accessModes:
        - ReadWriteOnce
        resources:
          requests:
            storage: 10Gi
        storageClassName: gold
    
  version: "v0.15.1"
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          topologyKey: kubernetes.io/hostname
          labelSelector:
            matchLabels:
              app: alertmanager
              alertmanager: mon
  imagePullSecrets:
    []
    

---
# Source: kube-prometheus/charts/alertmanager/templates/psp.yaml

apiVersion: extensions/v1beta1
kind: PodSecurityPolicy
metadata:
  labels:
    app: alertmanager
    chart: alertmanager-0.1.7
    heritage: Tiller
    release: mon
  name: mon-alertmanager
  namespace: monitoring
spec:
  privileged: false
  # Required to prevent escalations to root.
  # allowPrivilegeEscalation: false
  # This is redundant with non-root + disallow privilege escalation,
  # but we can provide it for defense in depth.
  #requiredDropCapabilities:
  #  - ALL
  # Allow core volume types.
  volumes:
    - 'configMap'
    - 'emptyDir'
    - 'projected'
    - 'secret'
    - 'downwardAPI'
    - 'persistentVolumeClaim'
  hostNetwork: false
  hostIPC: false
  hostPID: false
  runAsUser:
    # Permits the container to run with root privileges as well.
    rule: 'RunAsAny'
  seLinux:
    # This policy assumes the nodes are using AppArmor rather than SELinux.
    rule: 'RunAsAny'
  supplementalGroups:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  fsGroup:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  readOnlyRootFilesystem: false

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/psp.yaml

apiVersion: extensions/v1beta1
kind: PodSecurityPolicy
metadata:
  labels:
    app: exporter-kube-state
    chart: exporter-kube-state-0.2.6
    heritage: Tiller
    release: mon
  name: mon-exporter-kube-state
  namespace: monitoring
spec:
  privileged: false
  # Required to prevent escalations to root.
  # allowPrivilegeEscalation: false
  # This is redundant with non-root + disallow privilege escalation,
  # but we can provide it for defense in depth.
  #requiredDropCapabilities:
  #  - ALL
  # Allow core volume types.
  volumes:
    - 'configMap'
    - 'emptyDir'
    - 'projected'
    - 'secret'
    - 'downwardAPI'
    - 'persistentVolumeClaim'
  hostNetwork: false
  hostIPC: false
  hostPID: false
  runAsUser:
    # Permits the container to run with root privileges as well.
    rule: 'RunAsAny'
  seLinux:
    # This policy assumes the nodes are using AppArmor rather than SELinux.
    rule: 'RunAsAny'
  supplementalGroups:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  fsGroup:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  readOnlyRootFilesystem: false

---
# Source: kube-prometheus/charts/exporter-node/templates/psp.yaml

apiVersion: extensions/v1beta1
kind: PodSecurityPolicy
metadata:
  labels:
    app: exporter-node
    chart: exporter-node-0.4.6
    heritage: Tiller
    release: mon
  name: mon-exporter-node
  namespace: monitoring
spec:
  privileged: false
  # Required to prevent escalations to root.
  # allowPrivilegeEscalation: false
  # This is redundant with non-root + disallow privilege escalation,
  # but we can provide it for defense in depth.
  #requiredDropCapabilities:
  #  - ALL
  # Allow core volume types.
  volumes:
    - 'configMap'
    - 'emptyDir'
    - 'projected'
    - 'secret'
    - 'downwardAPI'
    - 'persistentVolumeClaim'
    - 'hostPath'
  hostNetwork: true
  hostIPC: false
  hostPID: true
  hostPorts:
    - min: 0
      max: 65535
  runAsUser:
    # Permits the container to run with root privileges as well.
    rule: 'RunAsAny'
  seLinux:
    # This policy assumes the nodes are using AppArmor rather than SELinux.
    rule: 'RunAsAny'
  supplementalGroups:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  fsGroup:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  readOnlyRootFilesystem: false

---
# Source: kube-prometheus/charts/grafana/templates/psp.yaml

apiVersion: extensions/v1beta1
kind: PodSecurityPolicy
metadata:
  labels:
    app: mon-grafana
    chart: grafana-0.0.37
    heritage: Tiller
    release: mon
  name: mon-grafana
  namespace: monitoring
spec:
  privileged: false
  # Required to prevent escalations to root.
  # allowPrivilegeEscalation: false
  # This is redundant with non-root + disallow privilege escalation,
  # but we can provide it for defense in depth.
  #requiredDropCapabilities:
  #  - ALL
  # Allow core volume types.
  volumes:
    - 'configMap'
    - 'emptyDir'
    - 'projected'
    - 'secret'
    - 'downwardAPI'
    - 'persistentVolumeClaim'
    - 'hostPath'
  hostNetwork: true
  hostIPC: false
  hostPID: true
  hostPorts:
    - min: 0
      max: 65535
  runAsUser:
    # Permits the container to run with root privileges as well.
    rule: 'RunAsAny'
  seLinux:
    # This policy assumes the nodes are using AppArmor rather than SELinux.
    rule: 'RunAsAny'
  supplementalGroups:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  fsGroup:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  readOnlyRootFilesystem: false

---
# Source: kube-prometheus/charts/prometheus/templates/psp.yaml

apiVersion: extensions/v1beta1
kind: PodSecurityPolicy
metadata:
  labels:
    app: prometheus
    chart: prometheus-0.0.51
    heritage: Tiller
    release: mon
  name: mon-prometheus
  namespace: monitoring
spec:
  privileged: false
  # Required to prevent escalations to root.
  # allowPrivilegeEscalation: false
  # This is redundant with non-root + disallow privilege escalation,
  # but we can provide it for defense in depth.
  #requiredDropCapabilities:
  #  - ALL
  # Allow core volume types.
  volumes:
    - 'configMap'
    - 'emptyDir'
    - 'projected'
    - 'secret'
    - 'downwardAPI'
    - 'persistentVolumeClaim'
  hostNetwork: false
  hostIPC: false
  hostPID: false
  runAsUser:
    # Permits the container to run with root privileges as well.
    rule: 'RunAsAny'
  seLinux:
    # This policy assumes the nodes are using AppArmor rather than SELinux.
    rule: 'RunAsAny'
  supplementalGroups:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  fsGroup:
    rule: 'MustRunAs'
    ranges:
      # Forbid adding the root group.
      - min: 0
        max: 65535
  readOnlyRootFilesystem: false

---
# Source: kube-prometheus/charts/prometheus/templates/prometheus.yaml
apiVersion: monitoring.coreos.com/v1
kind: Prometheus
metadata:
  labels:
    app: prometheus
    chart: prometheus-0.0.51
    heritage: Tiller
    prometheus: mon-prometheus
    release: mon
  name: mon-prometheus
  namespace: monitoring
spec:
  alerting:
    alertmanagers:
      - namespace: monitoring
        name: mon-alertmanager
        port: http
  baseImage: "quay.io/prometheus/prometheus"
  externalUrl: http://mon-prometheus.monitoring:9090
  paused: false
  replicas: 1
  logLevel:  info
  resources:
    {}
    
  retention: "24h"
  routePrefix: "/"
  serviceAccountName: mon-prometheus

  serviceMonitorSelector:
    matchLabels:
      prometheus: "mon"
  ruleSelector:
    matchLabels:
      prometheus: "mon"
  storage:
    volumeClaimTemplate:
      spec:
        accessModes:
        - ReadWriteOnce
        resources:
          requests:
            storage: 10Gi
        storageClassName: gold
    
  version: "v2.2.1"
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          topologyKey: kubernetes.io/hostname
          labelSelector:
            matchLabels:
              app: prometheus
              prometheus: "mon"
  imagePullSecrets: 
    []
    


---
# Source: kube-prometheus/charts/alertmanager/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "alertmanager"
    chart: alertmanager-0.1.7
    heritage: Tiller
    prometheus: "mon"
    release: mon   
  name: mon-alertmanager
  namespace: monitoring
spec:
  
  groups:
  - name: alertmanager.rules
    rules:
    - alert: AlertmanagerConfigInconsistent
      expr: count_values("config_hash", alertmanager_config_hash) BY (service) / ON(service)
        GROUP_LEFT() label_replace(prometheus_operator_alertmanager_spec_replicas, "service",
        "alertmanager-$1", "alertmanager", "(.*)") != 1
      for: 5m
      labels:
        severity: critical
      annotations:
        description: The configuration of the instances of the Alertmanager cluster
          `{{$labels.service}}` are out of sync.
        summary: Configuration out of sync
    - alert: AlertmanagerDownOrMissing
      expr: label_replace(prometheus_operator_alertmanager_spec_replicas, "job", "alertmanager-$1",
        "alertmanager", "(.*)") / ON(job) GROUP_RIGHT() sum(up) BY (job) != 1
      for: 5m
      labels:
        severity: warning
      annotations:
        description: An unexpected number of Alertmanagers are scraped or Alertmanagers
          disappeared from discovery.
        summary: Alertmanager down or missing
    - alert: AlertmanagerFailedReload
      expr: alertmanager_config_last_reload_successful == 0
      for: 10m
      labels:
        severity: warning
      annotations:
        description: Reloading Alertmanager's configuration has failed for {{ $labels.namespace
          }}/{{ $labels.pod}}.
        summary: Alertmanager's configuration reload failed
  


---
# Source: kube-prometheus/charts/exporter-kube-controller-manager/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "prometheus"
    chart: exporter-kube-controller-manager-0.1.10
    heritage: Tiller
    prometheus: mon
    release: mon
  name: mon-exporter-kube-controller-manager
  namespace: monitoring
spec:
  
  groups:
  - name: kube-controller-manager.rules
    rules:
    - alert: K8SControllerManagerDown
      expr: absent(up{job="kube-controller-manager"} == 1)
      for: 5m
      labels:
        severity: critical
      annotations:
        description: There is no running K8S controller manager. Deployments and replication
          controllers are not making progress.
        runbook: https://coreos.com/tectonic/docs/latest/troubleshooting/controller-recovery.html#recovering-a-controller-manager
        summary: Controller manager is down
  

---
# Source: kube-prometheus/charts/exporter-kube-etcd/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "prometheus"
    chart: exporter-kube-etcd-0.1.15
    heritage: Tiller
    prometheus: mon
    release: mon   
  name: mon-exporter-kube-etcd
  namespace: monitoring
spec:
  
  groups:
  - name: ./etcd3.rules
    rules:
    - alert: InsufficientMembers
      expr: count(up{job="kube-etcd"} == 0) > (count(up{job="kube-etcd"}) / 2 - 1)
      for: 3m
      labels:
        severity: critical
      annotations:
        description: If one more etcd member goes down the cluster will be unavailable
        summary: etcd cluster insufficient members
    - alert: NoLeader
      expr: etcd_server_has_leader{job="kube-etcd"} == 0
      for: 1m
      labels:
        severity: critical
      annotations:
        description: etcd member {{ $labels.instance }} has no leader
        summary: etcd member has no leader
    - alert: HighNumberOfLeaderChanges
      expr: increase(etcd_server_leader_changes_seen_total{job="kube-etcd"}[1h]) > 3
      labels:
        severity: warning
      annotations:
        description: etcd instance {{ $labels.instance }} has seen {{ $value }} leader
          changes within the last hour
        summary: a high number of leader changes within the etcd cluster are happening
    - alert: HighNumberOfFailedGRPCRequests
      expr: sum(rate(grpc_server_handled_total{grpc_code!="OK",job="kube-etcd"}[5m])) BY (grpc_service, grpc_method)
        / sum(rate(grpc_server_handled_total{job="kube-etcd"}[5m])) BY (grpc_service, grpc_method) > 0.01
      for: 10m
      labels:
        severity: warning
      annotations:
        description: '{{ $value }}% of requests for {{ $labels.grpc_method }} failed
          on etcd instance {{ $labels.instance }}'
        summary: a high number of gRPC requests are failing
    - alert: HighNumberOfFailedGRPCRequests
      expr: sum(rate(grpc_server_handled_total{grpc_code!="OK",job="kube-etcd"}[5m])) BY (grpc_service, grpc_method)
        / sum(rate(grpc_server_handled_total{job="kube-etcd"}[5m])) BY (grpc_service, grpc_method) > 0.05
      for: 5m
      labels:
        severity: critical
      annotations:
        description: '{{ $value }}% of requests for {{ $labels.grpc_method }} failed
          on etcd instance {{ $labels.instance }}'
        summary: a high number of gRPC requests are failing
    - alert: GRPCRequestsSlow
      expr: histogram_quantile(0.99, sum(rate(grpc_server_handling_seconds_bucket{job="kube-etcd",grpc_type="unary"}[5m])) by (grpc_service, grpc_method, le))
        > 0.15
      for: 10m
      labels:
        severity: critical
      annotations:
        description: on etcd instance {{ $labels.instance }} gRPC requests to {{ $labels.grpc_method
          }} are slow
        summary: slow gRPC requests
    - alert: HighNumberOfFailedHTTPRequests
      expr: sum(rate(etcd_http_failed_total{job="kube-etcd"}[5m])) BY (method) / sum(rate(etcd_http_received_total{job="kube-etcd"}[5m]))
        BY (method) > 0.01
      for: 10m
      labels:
        severity: warning
      annotations:
        description: '{{ $value }}% of requests for {{ $labels.method }} failed on etcd
          instance {{ $labels.instance }}'
        summary: a high number of HTTP requests are failing
    - alert: HighNumberOfFailedHTTPRequests
      expr: sum(rate(etcd_http_failed_total{job="kube-etcd"}[5m])) BY (method) / sum(rate(etcd_http_received_total{job="kube-etcd"}[5m]))
        BY (method) > 0.05
      for: 5m
      labels:
        severity: critical
      annotations:
        description: '{{ $value }}% of requests for {{ $labels.method }} failed on etcd
          instance {{ $labels.instance }}'
        summary: a high number of HTTP requests are failing
    - alert: HTTPRequestsSlow
      expr: histogram_quantile(0.99, rate(etcd_http_successful_duration_seconds_bucket[5m]))
        > 0.15
      for: 10m
      labels:
        severity: warning
      annotations:
        description: on etcd instance {{ $labels.instance }} HTTP requests to {{ $labels.method
          }} are slow
        summary: slow HTTP requests
    - alert: EtcdMemberCommunicationSlow
      expr: histogram_quantile(0.99, rate(etcd_network_peer_round_trip_time_seconds_bucket[5m]))
        > 0.15
      for: 10m
      labels:
        severity: warning
      annotations:
        description: etcd instance {{ $labels.instance }} member communication with
          {{ $labels.To }} is slow
        summary: etcd member communication is slow
    - alert: HighNumberOfFailedProposals
      expr: increase(etcd_server_proposals_failed_total{job="kube-etcd"}[1h]) > 5
      labels:
        severity: warning
      annotations:
        description: etcd instance {{ $labels.instance }} has seen {{ $value }} proposal
          failures within the last hour
        summary: a high number of proposals within the etcd cluster are failing
    - alert: HighFsyncDurations
      expr: histogram_quantile(0.99, rate(etcd_disk_wal_fsync_duration_seconds_bucket[5m]))
        > 0.5
      for: 10m
      labels:
        severity: warning
      annotations:
        description: etcd instance {{ $labels.instance }} fync durations are high
        summary: high fsync durations
    - alert: HighCommitDurations
      expr: histogram_quantile(0.99, rate(etcd_disk_backend_commit_duration_seconds_bucket[5m]))
        > 0.25
      for: 10m
      labels:
        severity: warning
      annotations:
        description: etcd instance {{ $labels.instance }} commit durations are high
        summary: high commit durations
  

---
# Source: kube-prometheus/charts/exporter-kube-scheduler/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "prometheus"
    chart: exporter-kube-scheduler-0.1.9
    heritage: Tiller
    prometheus: mon
    release: mon 
  name: mon-exporter-kube-scheduler
  namespace: monitoring
spec:
  
  groups:
  - name: kube-scheduler.rules
    rules:
    - record: cluster:scheduler_e2e_scheduling_latency_seconds:quantile
      expr: histogram_quantile(0.99, sum(scheduler_e2e_scheduling_latency_microseconds_bucket)
        BY (le, cluster)) / 1e+06
      labels:
        quantile: "0.99"
    - record: cluster:scheduler_e2e_scheduling_latency_seconds:quantile
      expr: histogram_quantile(0.9, sum(scheduler_e2e_scheduling_latency_microseconds_bucket)
        BY (le, cluster)) / 1e+06
      labels:
        quantile: "0.9"
    - record: cluster:scheduler_e2e_scheduling_latency_seconds:quantile
      expr: histogram_quantile(0.5, sum(scheduler_e2e_scheduling_latency_microseconds_bucket)
        BY (le, cluster)) / 1e+06
      labels:
        quantile: "0.5"
    - record: cluster:scheduler_scheduling_algorithm_latency_seconds:quantile
      expr: histogram_quantile(0.99, sum(scheduler_scheduling_algorithm_latency_microseconds_bucket)
        BY (le, cluster)) / 1e+06
      labels:
        quantile: "0.99"
    - record: cluster:scheduler_scheduling_algorithm_latency_seconds:quantile
      expr: histogram_quantile(0.9, sum(scheduler_scheduling_algorithm_latency_microseconds_bucket)
        BY (le, cluster)) / 1e+06
      labels:
        quantile: "0.9"
    - record: cluster:scheduler_scheduling_algorithm_latency_seconds:quantile
      expr: histogram_quantile(0.5, sum(scheduler_scheduling_algorithm_latency_microseconds_bucket)
        BY (le, cluster)) / 1e+06
      labels:
        quantile: "0.5"
    - record: cluster:scheduler_binding_latency_seconds:quantile
      expr: histogram_quantile(0.99, sum(scheduler_binding_latency_microseconds_bucket)
        BY (le, cluster)) / 1e+06
      labels:
        quantile: "0.99"
    - record: cluster:scheduler_binding_latency_seconds:quantile
      expr: histogram_quantile(0.9, sum(scheduler_binding_latency_microseconds_bucket)
        BY (le, cluster)) / 1e+06
      labels:
        quantile: "0.9"
    - record: cluster:scheduler_binding_latency_seconds:quantile
      expr: histogram_quantile(0.5, sum(scheduler_binding_latency_microseconds_bucket)
        BY (le, cluster)) / 1e+06
      labels:
        quantile: "0.5"
    - alert: K8SSchedulerDown
      expr: absent(up{job="kube-scheduler"} == 1)
      for: 5m
      labels:
        severity: critical
      annotations:
        description: There is no running K8S scheduler. New pods are not being assigned
          to nodes.
        runbook: https://coreos.com/tectonic/docs/latest/troubleshooting/controller-recovery.html#recovering-a-scheduler
        summary: Scheduler is down
  

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "prometheus"
    chart: exporter-kube-state-0.2.6
    heritage: Tiller
    prometheus: mon
    release: mon 
  name: mon-exporter-kube-state
  namespace: monitoring
spec:
  
  groups:
  - name: kube-state-metrics.rules
    rules:
    - alert: DeploymentGenerationMismatch
      expr: kube_deployment_status_observed_generation != kube_deployment_metadata_generation
      for: 15m
      labels:
        severity: warning
      annotations:
        description: Observed deployment generation does not match expected one for
          deployment {{$labels.namespace}}/{{$labels.deployment}}
        summary: Deployment is outdated
    - alert: DeploymentReplicasNotUpdated
      expr: ((kube_deployment_status_replicas_updated != kube_deployment_spec_replicas)
        or (kube_deployment_status_replicas_available != kube_deployment_spec_replicas))
        unless (kube_deployment_spec_paused == 1)
      for: 15m
      labels:
        severity: warning
      annotations:
        description: Replicas are not updated and available for deployment {{$labels.namespace}}/{{$labels.deployment}}
        summary: Deployment replicas are outdated
    - alert: DaemonSetRolloutStuck
      expr: kube_daemonset_status_number_ready / kube_daemonset_status_desired_number_scheduled
        * 100 < 100
      for: 15m
      labels:
        severity: warning
      annotations:
        description: Only {{$value}}% of desired pods scheduled and ready for daemon
          set {{$labels.namespace}}/{{$labels.daemonset}}
        summary: DaemonSet is missing pods
    - alert: K8SDaemonSetsNotScheduled
      expr: kube_daemonset_status_desired_number_scheduled - kube_daemonset_status_current_number_scheduled
        > 0
      for: 10m
      labels:
        severity: warning
      annotations:
        description: A number of daemonsets are not scheduled.
        summary: Daemonsets are not scheduled correctly
    - alert: DaemonSetsMissScheduled
      expr: kube_daemonset_status_number_misscheduled > 0
      for: 10m
      labels:
        severity: warning
      annotations:
        description: A number of daemonsets are running where they are not supposed
          to run.
        summary: Daemonsets are not scheduled correctly
    - alert: PodFrequentlyRestarting
      expr: increase(kube_pod_container_status_restarts_total[1h]) > 5
      for: 10m
      labels:
        severity: warning
      annotations:
        description: Pod {{$labels.namespace}}/{{$labels.pod}} was restarted {{$value}}
          times within the last hour
        summary: Pod is restarting frequently
  


---
# Source: kube-prometheus/charts/exporter-kubelets/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "prometheus"
    chart: exporter-kubelets-0.2.11
    heritage: Tiller
    prometheus: mon
    release: mon
  name: mon-exporter-kubelets
  namespace: monitoring
spec:
  
  groups:
  - name: kubelet.rules
    rules:
    - alert: K8SNodeNotReady
      expr: kube_node_status_condition{condition="Ready",status="true"} == 0
      for: 1h
      labels:
        severity: warning
      annotations:
        description: The Kubelet on {{ $labels.node }} has not checked in with the API,
          or has set itself to NotReady, for more than an hour
        summary: Node status is NotReady
    - alert: K8SManyNodesNotReady
      expr: count(kube_node_status_condition{condition="Ready",status="true"} == 0)
        > 1 and (count(kube_node_status_condition{condition="Ready",status="true"} ==
        0) / count(kube_node_status_condition{condition="Ready",status="true"})) * 100 > 20
      for: 1m
      labels:
        severity: critical
      annotations:
        description: '{{ $value }}% of Kubernetes nodes are not ready'
    - alert: K8SKubeletDown
      expr: count(up{job="kubelet"} == 0) / count(up{job="kubelet"}) * 100 > 3
      for: 1h
      labels:
        severity: warning
      annotations:
        description: Prometheus failed to scrape {{ $value }}% of kubelets.
        summary: Prometheus failed to scrape
    - alert: K8SKubeletDown
      expr: (absent(up{job="kubelet"} == 1) or count(up{job="kubelet"} == 0) / count(up{job="kubelet"}))
        * 100 > 10
      for: 1h
      labels:
        severity: critical
      annotations:
        description: Prometheus failed to scrape {{ $value }}% of kubelets, or all Kubelets
          have disappeared from service discovery.
        summary: Many Kubelets cannot be scraped
    - alert: K8SKubeletTooManyPods
      expr: kubelet_running_pod_count > 100
      for: 10m
      labels:
        severity: warning
      annotations:
        description: Kubelet {{$labels.instance}} is running {{$value}} pods, close
          to the limit of 110
        summary: Kubelet is close to pod limit
  

---
# Source: kube-prometheus/charts/exporter-kubernetes/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "prometheus"
    chart: exporter-kubernetes-0.1.10
    heritage: Tiller
    prometheus: mon
    release: mon
  name: mon-exporter-kubernetes
  namespace: monitoring
spec:
  
  groups:
  - name: kubernetes.rules
    rules:
    - record: pod_name:container_memory_usage_bytes:sum
      expr: sum(container_memory_usage_bytes{container_name!="POD",pod_name!=""}) BY
        (pod_name)
    - record: pod_name:container_spec_cpu_shares:sum
      expr: sum(container_spec_cpu_shares{container_name!="POD",pod_name!=""}) BY (pod_name)
    - record: pod_name:container_cpu_usage:sum
      expr: sum(rate(container_cpu_usage_seconds_total{container_name!="POD",pod_name!=""}[5m]))
        BY (pod_name)
    - record: pod_name:container_fs_usage_bytes:sum
      expr: sum(container_fs_usage_bytes{container_name!="POD",pod_name!=""}) BY (pod_name)
    - record: namespace:container_memory_usage_bytes:sum
      expr: sum(container_memory_usage_bytes{container_name!=""}) BY (namespace)
    - record: namespace:container_spec_cpu_shares:sum
      expr: sum(container_spec_cpu_shares{container_name!=""}) BY (namespace)
    - record: namespace:container_cpu_usage:sum
      expr: sum(rate(container_cpu_usage_seconds_total{container_name!="POD"}[5m]))
        BY (namespace)
    - record: cluster:memory_usage:ratio
      expr: sum(container_memory_usage_bytes{container_name!="POD",pod_name!=""}) BY
        (cluster) / sum(machine_memory_bytes) BY (cluster)
    - record: cluster:container_spec_cpu_shares:ratio
      expr: sum(container_spec_cpu_shares{container_name!="POD",pod_name!=""}) / 1000
        / sum(machine_cpu_cores)
    - record: cluster:container_cpu_usage:ratio
      expr: sum(rate(container_cpu_usage_seconds_total{container_name!="POD",pod_name!=""}[5m]))
        / sum(machine_cpu_cores)
    - record: apiserver_latency_seconds:quantile
      expr: histogram_quantile(0.99, rate(apiserver_request_latencies_bucket[5m])) /
        1e+06
      labels:
        quantile: "0.99"
    - record: apiserver_latency:quantile_seconds
      expr: histogram_quantile(0.9, rate(apiserver_request_latencies_bucket[5m])) /
        1e+06
      labels:
        quantile: "0.9"
    - record: apiserver_latency_seconds:quantile
      expr: histogram_quantile(0.5, rate(apiserver_request_latencies_bucket[5m])) /
        1e+06
      labels:
        quantile: "0.5"
    - alert: APIServerLatencyHigh
      expr: apiserver_latency_seconds:quantile{quantile="0.99",subresource!="log",verb!~"^(?:WATCH|WATCHLIST|PROXY|CONNECT)$"}
        > 1
      for: 10m
      labels:
        severity: warning
      annotations:
        description: the API server has a 99th percentile latency of {{ $value }} seconds
          for {{$labels.verb}} {{$labels.resource}}
        summary: API server high latency
    - alert: APIServerLatencyHigh
      expr: apiserver_latency_seconds:quantile{quantile="0.99",subresource!="log",verb!~"^(?:WATCH|WATCHLIST|PROXY|CONNECT)$"}
        > 4
      for: 10m
      labels:
        severity: critical
      annotations:
        description: the API server has a 99th percentile latency of {{ $value }} seconds
          for {{$labels.verb}} {{$labels.resource}}
        summary: API server high latency
    - alert: APIServerErrorsHigh
      expr: rate(apiserver_request_count{code=~"^(?:5..)$"}[5m]) / rate(apiserver_request_count[5m])
        * 100 > 2
      for: 10m
      labels:
        severity: warning
      annotations:
        description: API server returns errors for {{ $value }}% of requests
        summary: API server request errors
    - alert: APIServerErrorsHigh
      expr: rate(apiserver_request_count{code=~"^(?:5..)$"}[5m]) / rate(apiserver_request_count[5m])
        * 100 > 5
      for: 10m
      labels:
        severity: critical
      annotations:
        description: API server returns errors for {{ $value }}% of requests
    - alert: K8SApiserverDown
      expr: absent(up{job="apiserver"} == 1)
      for: 20m
      labels:
        severity: critical
      annotations:
        description: No API servers are reachable or all have disappeared from service
          discovery
        summary: No API servers are reachable
  
    - alert: K8sCertificateExpirationNotice
      labels:
        severity: warning
      annotations:
        description: Kubernetes API Certificate is expiring soon (less than 7 days)
        summary: Kubernetes API Certificate is expiering soon
      expr: sum(apiserver_client_certificate_expiration_seconds_bucket{le="604800"}) > 0
  
    - alert: K8sCertificateExpirationNotice
      labels:
        severity: critical
      annotations:
        description: Kubernetes API Certificate is expiring in less than 1 day
        summary: Kubernetes API Certificate is expiering
      expr: sum(apiserver_client_certificate_expiration_seconds_bucket{le="86400"}) > 0
  

---
# Source: kube-prometheus/charts/exporter-node/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "prometheus"
    chart: exporter-node-0.4.6
    heritage: Tiller
    prometheus: mon
    release: mon   
  name: mon-exporter-node
  namespace: monitoring
spec:
  
  groups:
  - name: node.rules
    rules:
    - record: instance:node_cpu:rate:sum
      expr: sum(rate(node_cpu{mode!="idle",mode!="iowait"}[3m]))
        BY (instance)
    - record: instance:node_filesystem_usage:sum
      expr: sum((node_filesystem_size{mountpoint="/"} - node_filesystem_free{mountpoint="/"}))
        BY (instance)
    - record: instance:node_network_receive_bytes:rate:sum
      expr: sum(rate(node_network_receive_bytes[3m])) BY (instance)
    - record: instance:node_network_transmit_bytes:rate:sum
      expr: sum(rate(node_network_transmit_bytes[3m])) BY (instance)
    - record: instance:node_cpu:ratio
      expr: sum(rate(node_cpu{mode!="idle",mode!="iowait"}[5m])) WITHOUT (cpu, mode) / ON(instance)
        GROUP_LEFT() count(sum(node_cpu) BY (instance, cpu)) BY (instance)
    - record: cluster:node_cpu:sum_rate5m
      expr: sum(rate(node_cpu{mode!="idle",mode!="iowait"}[5m]))
    - record: cluster:node_cpu:ratio
      expr: cluster:node_cpu:rate5m / count(sum(node_cpu) BY (instance, cpu))
    - alert: NodeExporterDown
      expr: absent(up{job="node-exporter"} == 1)
      for: 10m
      labels:
        severity: warning
      annotations:
        description: Prometheus could not scrape a node-exporter for more than 10m,
          or node-exporters have disappeared from discovery
        summary: Prometheus could not scrape a node-exporter
    - alert: NodeDiskRunningFull
      expr: predict_linear(node_filesystem_free{job="node-exporter",mountpoint!~"^/etc/(?:resolv.conf|hosts|hostname)$"}[6h], 3600 * 24) < 0 and on(instance) up{job="node-exporter"}
      for: 30m
      labels:
        severity: warning
      annotations:
        description: device {{$labels.device}} on node {{$labels.instance}} is running
          full within the next 24 hours (mounted at {{$labels.mountpoint}})
        summary: Node disk is running full within 24 hours
    - alert: NodeDiskRunningFull
      expr: predict_linear(node_filesystem_free{job="node-exporter",mountpoint!~"^/etc/(?:resolv.conf|hosts|hostname)$"}[30m], 3600 * 2) < 0 and on(instance) up{job="node-exporter"}
      for: 10m
      labels:
        severity: critical
      annotations:
        description: device {{$labels.device}} on node {{$labels.instance}} is running
          full within the next 2 hours (mounted at {{$labels.mountpoint}})
        summary: Node disk is running full within 2 hours
  

---
# Source: kube-prometheus/charts/prometheus/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "prometheus"
    chart: prometheus-0.0.51
    heritage: Tiller
    prometheus: "mon"
    release: mon
  name: mon-prometheus-rules
  namespace: monitoring
spec:
  
  groups:
  - name: prometheus.rules
    rules:
    - alert: PrometheusConfigReloadFailed
      expr: prometheus_config_last_reload_successful == 0
      for: 10m
      labels:
        severity: warning
      annotations:
        description: Reloading Prometheus' configuration has failed for {{$labels.namespace}}/{{$labels.pod}}
        summary: Reloading Promehteus' configuration failed
  
    - alert: PrometheusNotificationQueueRunningFull
      expr: predict_linear(prometheus_notifications_queue_length[5m], 60 * 30) > prometheus_notifications_queue_capacity
      for: 10m
      labels:
        severity: warning
      annotations:
        description: Prometheus' alert notification queue is running full for {{$labels.namespace}}/{{
          $labels.pod}}
        summary: Prometheus' alert notification queue is running full  
  
    - alert: PrometheusErrorSendingAlerts
      expr: rate(prometheus_notifications_errors_total[5m]) / rate(prometheus_notifications_sent_total[5m])
        > 0.01
      for: 10m
      labels:
        severity: warning
      annotations:
        description: Errors while sending alerts from Prometheus {{$labels.namespace}}/{{
          $labels.pod}} to Alertmanager {{$labels.Alertmanager}}
        summary: Errors while sending alert from Prometheus
  
    - alert: PrometheusErrorSendingAlerts
      expr: rate(prometheus_notifications_errors_total[5m]) / rate(prometheus_notifications_sent_total[5m])
        > 0.03
      for: 10m
      labels:
        severity: critical
      annotations:
        description: Errors while sending alerts from Prometheus {{$labels.namespace}}/{{
          $labels.pod}} to Alertmanager {{$labels.Alertmanager}}
        summary: Errors while sending alerts from Prometheus
  
    - alert: PrometheusNotConnectedToAlertmanagers
      expr: prometheus_notifications_alertmanagers_discovered < 1
      for: 10m
      labels:
        severity: warning
      annotations:
        description: Prometheus {{ $labels.namespace }}/{{ $labels.pod}} is not connected
          to any Alertmanagers
        summary: Prometheus is not connected to any Alertmanagers
  
    - alert: PrometheusTSDBReloadsFailing
      expr: increase(prometheus_tsdb_reloads_failures_total[2h]) > 0
      for: 12h
      labels:
        severity: warning
      annotations:
        description: '{{$labels.job}} at {{$labels.instance}} had {{$value | humanize}}
          reload failures over the last four hours.'
        summary: Prometheus has issues reloading data blocks from disk
  
    - alert: PrometheusTSDBCompactionsFailing
      expr: increase(prometheus_tsdb_compactions_failed_total[2h]) > 0
      for: 12h
      labels:
        severity: warning
      annotations:
        description: '{{$labels.job}} at {{$labels.instance}} had {{$value | humanize}}
          compaction failures over the last four hours.'
        summary: Prometheus has issues compacting sample blocks
  
    - alert: PrometheusTSDBWALCorruptions
      expr: tsdb_wal_corruptions_total > 0
      for: 4h
      labels:
        severity: warning
      annotations:
        description: '{{$labels.job}} at {{$labels.instance}} has a corrupted write-ahead
          log (WAL).'
        summary: Prometheus write-ahead log is corrupted
  
    - alert: PrometheusNotIngestingSamples
      expr: rate(prometheus_tsdb_head_samples_appended_total[5m]) <= 0
      for: 10m
      labels:
        severity: warning
      annotations:
        description: "Prometheus {{ $labels.namespace }}/{{ $labels.pod}} isn't ingesting samples."
        summary: "Prometheus isn't ingesting samples"
  
    - alert: PrometheusTargetScrapesDuplicate
      expr: increase(prometheus_target_scrapes_sample_duplicate_timestamp_total[5m]) > 0
      for: 10m
      labels:
        severity: warning
      annotations:
        description: "{{$labels.namespace}}/{{$labels.pod}} has many samples rejected due to duplicate timestamps but different values"
        summary: Prometheus has many samples rejected
  


---
# Source: kube-prometheus/templates/prometheusrule.yaml
apiVersion: monitoring.coreos.com/v1
kind: PrometheusRule
metadata:
  labels:
    app: "prometheus"
    chart: kube-prometheus-0.0.105
    heritage: Tiller
    prometheus: mon
    release: mon
  name: mon-kube-prometheus
  namespace: monitoring
spec:
  
  groups:
  - name: general.rules
    rules:
    - alert: TargetDown
      expr: 100 * (count(up == 0) BY (job) / count(up) BY (job)) > 10
      for: 10m
      labels:
        severity: warning
      annotations:
        description: '{{ $value }}% of {{ $labels.job }} targets are down.'
        summary: Targets are down
    - alert: DeadMansSwitch
      expr: vector(1)
      labels:
        severity: none
      annotations:
        description: This is a DeadMansSwitch meant to ensure that the entire Alerting
          pipeline is functional.
        summary: Alerting DeadMansSwitch
    - record: fd_utilization
      expr: process_open_fds / process_max_fds
    - alert: FdExhaustionClose
      expr: predict_linear(fd_utilization[1h], 3600 * 4) > 1
      for: 10m
      labels:
        severity: warning
      annotations:
        description: '{{ $labels.job }}: {{ $labels.namespace }}/{{ $labels.pod }} instance
          will exhaust in file/socket descriptors within the next 4 hours'
        summary: file descriptors soon exhausted
    - alert: FdExhaustionClose
      expr: predict_linear(fd_utilization[10m], 3600) > 1
      for: 10m
      labels:
        severity: critical
      annotations:
        description: '{{ $labels.job }}: {{ $labels.namespace }}/{{ $labels.pod }} instance
          will exhaust in file/socket descriptors within the next hour'
        summary: file descriptors soon exhausted
  

---
# Source: kube-prometheus/charts/alertmanager/templates/servicemonitor.yaml

apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: alertmanager
    chart: "alertmanager-0.1.7"
    component: alertmanager
    heritage: "Tiller"
    release: "mon"
    prometheus: "mon"
  name: mon-alertmanager
  namespace: monitoring
spec:
  jobLabel: app
  selector:
    matchLabels:
      alertmanager: mon
      app: alertmanager
      chart: alertmanager-0.1.7
  namespaceSelector:
    matchNames:
      - "monitoring"
  endpoints:
  - port: http
    interval: 30s

---
# Source: kube-prometheus/charts/exporter-kube-controller-manager/templates/servicemonitor.yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: exporter-kube-controller-manager
    chart: "exporter-kube-controller-manager-0.1.10"
    component: kube-controller-manager
    heritage: "Tiller"
    release: "mon"
    prometheus: mon
  name: mon-exporter-kube-controller-manager
  namespace: monitoring
spec:
  jobLabel: component
  selector:
    matchLabels:
      app: exporter-kube-controller-manager
      component: kube-controller-manager
  namespaceSelector:
    matchNames:
      - "kube-system"
  endpoints:
  - port: http-metrics
    interval: 15s
    tlsConfig:
      caFile: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
      # Skip verification until we have resolved why the certificate validation
      # for the kubelet on API server nodes fail.
      insecureSkipVerify: true
    bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token

---
# Source: kube-prometheus/charts/exporter-kube-dns/templates/servicemonitor.yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:    
    app: exporter-kube-dns
    chart: "exporter-kube-dns-0.1.7"
    component: kube-dns
    heritage: "Tiller"
    release: "mon"
    prometheus: mon    
  name: mon-exporter-kube-dns
  namespace: monitoring
spec:
  jobLabel: component
  selector:
    matchLabels:
      app: exporter-kube-dns
      component: kube-dns
  namespaceSelector:
    matchNames:
      - "kube-system"
  endpoints:
  - port: http-metrics-dnsmasq
    interval: 15s
    bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token
  - port: http-metrics-skydns
    interval: 15s
    bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token

---
# Source: kube-prometheus/charts/exporter-kube-etcd/templates/servicemonitor.yaml

apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: exporter-kube-etcd
    chart: "exporter-kube-etcd-0.1.15"
    component: kube-etcd
    heritage: "Tiller"
    release: "mon"
    prometheus: mon    
  name: mon-exporter-kube-etcd
  namespace: monitoring
spec:
  jobLabel: component
  selector:
    matchLabels:
      app: exporter-kube-etcd
      component: kube-etcd
  namespaceSelector:
    matchNames:
      - "kube-system"
  endpoints:
  - port: http-metrics
    interval: 15s
    bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token
---
# Source: kube-prometheus/charts/exporter-kube-scheduler/templates/servicemonitor.yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: exporter-kube-scheduler
    chart: "exporter-kube-scheduler-0.1.9"
    component: kube-scheduler
    heritage: "Tiller"
    release: "mon"
    prometheus: mon    
  name: mon-exporter-kube-scheduler
  namespace: monitoring
spec:
  jobLabel: component
  selector:
    matchLabels:
      app: exporter-kube-scheduler
      component: kube-scheduler
  namespaceSelector:
    matchNames:
      - "kube-system"
  endpoints:
  - port: http-metrics
    interval: 15s
    bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/servicemonitor.yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: exporter-kube-state
    chart: "exporter-kube-state-0.2.6"
    component: kube-state
    heritage: "Tiller"
    release: "mon"
    prometheus: mon    
  name: mon-exporter-kube-state
  namespace: monitoring
spec:
  jobLabel: component
  selector:
    matchLabels:
      app: exporter-kube-state
      component: kube-state
  namespaceSelector:
    matchNames:
      - "monitoring"
  endpoints:
  - port: kube-state-metrics
    interval: 15s
    honorLabels: true

---
# Source: kube-prometheus/charts/exporter-kubelets/templates/servicemonitor.yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: exporter-kubelets
    chart: "exporter-kubelets-0.2.11"
    component: kubelets
    heritage: "Tiller"
    release: "mon"
    prometheus: mon    
  name: mon-exporter-kubelets
  namespace: monitoring
spec:
  jobLabel: component
  selector:
    matchLabels:
      k8s-app: kubelet
  namespaceSelector:
    matchNames:
      - "kube-system"
  endpoints:
  - port: https-metrics
    scheme: https
    interval: 15s
    tlsConfig:
      caFile: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
      insecureSkipVerify: true
    bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token
  - port: https-metrics
    scheme: https
    path: /metrics/cadvisor
    interval: 30s
    honorLabels: true
    tlsConfig:
      caFile: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
      insecureSkipVerify: true
    bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token

---
# Source: kube-prometheus/charts/exporter-kubernetes/templates/servicemonitor.yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: exporter-kubernetes
    chart: "exporter-kubernetes-0.1.10"
    component: kubelets
    heritage: "Tiller"
    release: "mon"
    prometheus: mon    
  name: mon-exporter-kubernetes
  namespace: monitoring
spec:
  jobLabel: component
  selector:
    matchLabels:
      component: apiserver
      provider: kubernetes
  namespaceSelector:
    matchNames:
      - "default"
  endpoints:
  - port: https
    interval: 15s
    scheme: https
    tlsConfig:
      caFile: /var/run/secrets/kubernetes.io/serviceaccount/ca.crt
      # Skip verification until we have resolved why the certificate validation
      # for the kubelet on API server nodes fail.
      insecureSkipVerify: true
    bearerTokenFile: /var/run/secrets/kubernetes.io/serviceaccount/token

---
# Source: kube-prometheus/charts/exporter-node/templates/servicemonitor.yaml
apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: exporter-node
    chart: "exporter-node-0.4.6"
    component: node-exporter
    heritage: "Tiller"
    release: "mon"
    prometheus: mon    
  name: mon-exporter-node
  namespace: monitoring
spec:
  jobLabel: component
  selector:
    matchLabels:
      app: exporter-node
      component: node-exporter
  namespaceSelector:
    matchNames:
      - "monitoring"
  endpoints:
  - port: metrics
    interval: 15s

---
# Source: kube-prometheus/charts/grafana/templates/servicemonitors.yaml

apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: grafana
    chart: "grafana-0.0.37"
    component: grafana
    heritage: "Tiller"
    release: "mon"
    prometheus: mon    
  name: mon-grafana
  namespace: monitoring
spec:
  jobLabel: mon-grafana
  selector:
    matchLabels:
      app: mon-grafana
      chart: grafana-0.0.37
  namespaceSelector:
    matchNames:
      - "monitoring"
  endpoints:
  - port: http
    interval: 30s

---
# Source: kube-prometheus/charts/prometheus/templates/servicemonitor-prometheus.yaml

apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  labels:
    app: prometheus
    chart: "prometheus-0.0.51"
    heritage: "Tiller"
    release: "mon"
    prometheus: "mon"
  name: mon-prometheus
  namespace: monitoring
spec:
  jobLabel: app
  selector:
    matchLabels:
      app: prometheus
      prometheus: "mon"
      chart: prometheus-0.0.51
  namespaceSelector:
    matchNames:
      - "monitoring"
  endpoints:
  - port: http
    interval: 30s

---
# Source: kube-prometheus/charts/alertmanager/templates/alertmanager.rules.yaml

---
# Source: kube-prometheus/charts/alertmanager/templates/ingress.yaml


---
# Source: kube-prometheus/charts/exporter-kube-controller-manager/templates/endpoints.yaml


---
# Source: kube-prometheus/charts/exporter-kube-controller-manager/templates/kube-controller-manager.rules.yaml

---
# Source: kube-prometheus/charts/exporter-kube-etcd/templates/endpoints.yaml


---
# Source: kube-prometheus/charts/exporter-kube-etcd/templates/etcd3.rules.yaml


---
# Source: kube-prometheus/charts/exporter-kube-scheduler/templates/endpoints.yaml


---
# Source: kube-prometheus/charts/exporter-kube-scheduler/templates/kube-scheduler.rules.yaml

---
# Source: kube-prometheus/charts/exporter-kube-state/templates/kube-state-metrics.rules.yaml

---
# Source: kube-prometheus/charts/exporter-kubelets/templates/kubelet.rules.yaml

---
# Source: kube-prometheus/charts/exporter-kubernetes/templates/kubernetes.rules.yaml

---
# Source: kube-prometheus/charts/exporter-node/templates/endpoints.yaml


---
# Source: kube-prometheus/charts/exporter-node/templates/node.rules.yaml


---
# Source: kube-prometheus/charts/prometheus/templates/ingress.yaml


---
# Source: kube-prometheus/charts/prometheus/templates/prometheus.rules.yaml

---
# Source: kube-prometheus/charts/prometheus/templates/rules.yaml


---
# Source: kube-prometheus/charts/prometheus/templates/secret.yaml


---

---

---
# Source: kube-prometheus/charts/prometheus/templates/servicemonitors.yaml


---
# Source: kube-prometheus/templates/general.rules.yaml

